<z-content
  [title]="title"
  [navigationConfig]="navigationConfig()"
  [activeAnchor]="activeAnchor"
  [onAnchorClick]="onAnchorClick.bind(this)"
  scrollSpy
  (scrollSpyChange)="activeAnchor = $event"
>
  <z-doc-heading
    title="Changelog"
    description="Latest updates, new components, and improvements to ZardUI."
    scrollSpyItem="overview"
    id="overview"
  />

  <div class="mt-8 space-y-16">
    @for (entry of entries(); track trackByEntry($index, entry)) {
    <!-- Month Block -->
    <div [id]="entry.id" scrollSpyItem [scrollSpyItem]="entry.id" class="scroll-mt-20">
      <!-- Month Header -->
      <div class="mb-8">
        <div class="mb-4 flex items-center justify-between">
          <h2 class="text-3xl font-bold">{{ entry.meta.month }}</h2>
        </div>
        <p class="text-muted-foreground">{{ entry.overview }}</p>
      </div>

      <!-- Highlights Section (for structural improvements) -->
      @if (entry.highlights && entry.highlights.length > 0) {
      <section class="mb-8">
        <h3 class="mb-4 text-xl font-semibold">Highlights</h3>
        <div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
          @for (highlight of entry.highlights; track $index) {
          <div class="group bg-card hover:border-primary/50 relative rounded-lg border p-6 transition-colors">
            <div class="mb-3 flex items-center gap-3">
              <div class="bg-primary/10 text-primary flex h-10 w-10 items-center justify-center rounded-lg">
                @switch (highlight.icon) { @case ('zap') {
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path
                    d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"
                  />
                </svg>
                } @case ('terminal') {
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <polyline points="4 17 10 11 4 5" />
                  <line x1="12" x2="20" y1="19" y2="19" />
                </svg>
                } @case ('moon') {
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z" />
                </svg>
                } @case ('package') {
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path
                    d="M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z"
                  />
                  <path d="M12 22V12" />
                  <path d="m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7" />
                  <path d="m7.5 4.27 9 5.15" />
                </svg>
                } @case ('rocket') {
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z" />
                  <path
                    d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"
                  />
                  <path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0" />
                  <path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5" />
                </svg>
                } @case ('shield') {
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path
                    d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"
                  />
                </svg>
                } @case ('code') {
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <polyline points="16 18 22 12 16 6" />
                  <polyline points="8 6 2 12 8 18" />
                </svg>
                } @case ('settings') {
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path
                    d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"
                  />
                  <circle cx="12" cy="12" r="3" />
                </svg>
                } }
              </div>
              <h4 class="font-semibold">{{ highlight.title }}</h4>
            </div>
            <p class="text-muted-foreground text-sm">{{ highlight.description }}</p>
            @if (highlight.code) {
            <div class="mt-4">
              <code class="bg-muted rounded px-2 py-1 font-mono text-xs">{{ highlight.code }}</code>
            </div>
            }
          </div>
          }
        </div>
      </section>
      }

      <!-- New Components Section -->
      @if (entry.examples && entry.examples.length > 0) {
      <section class="mb-8">
        <h3 class="mb-4 text-xl font-semibold">New Components</h3>

        @for (example of entry.examples; track $index) {
        <div class="mb-8">
          <h4 class="mb-3 text-lg font-medium capitalize">{{ example.componentName }}</h4>

          <!-- CLI Installation -->
          <div class="mb-6">
            <z-steps [steps]="getInstallSteps(example.componentName)"></z-steps>
          </div>

          <!-- Component Example -->
          <z-code-box
            [componentType]="example.name"
            [demoDescription]="example.description"
            [path]="example.componentName + '/demo/' + example.name"
            [dynamicComponent]="example.component"
          ></z-code-box>
        </div>
        }
      </section>
      }
    </div>
    } @if (entries().length === 0) {
    <z-alert
      variant="outline"
      class="mt-8"
      zTitle="No entries found"
      zDescription="No changelog entries are available at this time."
    />
    }
  </div>
</z-content>
