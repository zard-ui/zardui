{
  "name": "input",
  "type": "registry:component",
  "files": [
    {
      "name": "input.directive.ts",
      "content": "import {\n  booleanAttribute,\n  computed,\n  Directive,\n  effect,\n  ElementRef,\n  forwardRef,\n  inject,\n  input,\n  linkedSignal,\n  model,\n} from '@angular/core';\nimport { NG_VALUE_ACCESSOR, type ControlValueAccessor } from '@angular/forms';\n\nimport type { ClassValue } from 'clsx';\n\nimport { mergeClasses, noopFn } from '@/shared/utils/merge-classes';\n\nimport {\n  inputVariants,\n  type ZardInputSizeVariants,\n  type ZardInputStatusVariants,\n  type ZardInputTypeVariants,\n} from './input.variants';\n\ntype OnTouchedType = () => void;\ntype OnChangeType = (value: string) => void;\n\n@Directive({\n  selector: 'input[z-input], textarea[z-input]',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => ZardInputDirective),\n      multi: true,\n    },\n  ],\n  host: {\n    '[class]': 'classes()',\n    '(input)': 'updateValue($event.target)',\n    '(blur)': 'onBlur()',\n  },\n  exportAs: 'zInput',\n})\nexport class ZardInputDirective implements ControlValueAccessor {\n  private readonly elementRef = inject(ElementRef);\n  private onTouched: OnTouchedType = noopFn;\n  private onChangeFn: OnChangeType = noopFn;\n\n  readonly class = input<ClassValue>('');\n  readonly zBorderless = input(false, { transform: booleanAttribute });\n  readonly zSize = input<ZardInputSizeVariants>('default');\n  readonly zStatus = input<ZardInputStatusVariants>();\n  readonly value = model<string>('');\n\n  readonly size = linkedSignal<ZardInputSizeVariants>(() => this.zSize());\n\n  protected readonly classes = computed(() =>\n    mergeClasses(\n      inputVariants({\n        zType: this.getType(),\n        zSize: this.size(),\n        zStatus: this.zStatus(),\n        zBorderless: this.zBorderless(),\n      }),\n      this.class(),\n    ),\n  );\n\n  constructor() {\n    effect(() => {\n      const value = this.value();\n\n      if (value !== undefined && value !== null) {\n        this.elementRef.nativeElement.value = value;\n      }\n    });\n  }\n\n  disable(b: boolean): void {\n    this.elementRef.nativeElement.disabled = b;\n  }\n\n  setDataSlot(name: string): void {\n    if (this.elementRef?.nativeElement?.dataset) {\n      this.elementRef.nativeElement.dataset.slot = name;\n    }\n  }\n\n  protected updateValue(target: EventTarget | null): void {\n    const el = target as HTMLInputElement | HTMLTextAreaElement | null;\n    this.value.set(el?.value ?? '');\n    this.onChangeFn(this.value());\n  }\n\n  protected onBlur() {\n    this.onTouched();\n  }\n\n  getType(): ZardInputTypeVariants {\n    const isTextarea = this.elementRef.nativeElement.tagName.toLowerCase() === 'textarea';\n    return isTextarea ? 'textarea' : 'default';\n  }\n\n  registerOnChange(fn: OnChangeType): void {\n    this.onChangeFn = fn;\n  }\n\n  registerOnTouched(fn: OnTouchedType): void {\n    this.onTouched = fn;\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disable(isDisabled);\n  }\n\n  writeValue(value?: string): void {\n    const newValue = value ?? '';\n    this.value.set(newValue);\n    this.elementRef.nativeElement.value = newValue;\n  }\n}\n"
    },
    {
      "name": "input.variants.ts",
      "content": "import { cva, type VariantProps } from 'class-variance-authority';\n\nexport type zInputIcon = 'email' | 'password' | 'text';\n\nexport const inputVariants = cva('w-full', {\n  variants: {\n    zType: {\n      default:\n        'flex rounded-md border px-4 font-normal border-input bg-transparent file:border-0 file:text-foreground file:bg-transparent file:font-medium placeholder:text-muted-foreground outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50',\n      textarea:\n        'flex pb-2 min-h-20 h-auto rounded-md border border-input bg-background px-3 py-2 text-base placeholder:text-muted-foreground outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50',\n    },\n    zSize: {\n      default: 'text-sm',\n      sm: 'text-xs',\n      lg: 'text-base',\n    },\n    zStatus: {\n      error: 'border-destructive focus-visible:ring-destructive',\n      warning: 'border-yellow-500 focus-visible:ring-yellow-500',\n      success: 'border-green-500 focus-visible:ring-green-500',\n    },\n    zBorderless: {\n      true: 'flex-1 bg-transparent border-0 outline-none focus-visible:ring-0 focus-visible:ring-offset-0 px-0 py-0',\n    },\n  },\n  defaultVariants: {\n    zType: 'default',\n    zSize: 'default',\n  },\n  compoundVariants: [\n    { zType: 'default', zSize: 'default', class: 'h-9 py-2 file:max-md:py-0' },\n    { zType: 'default', zSize: 'sm', class: 'h-8 file:md:py-2 file:max-md:py-1.5' },\n    { zType: 'default', zSize: 'lg', class: 'h-10 py-1 file:md:py-3 file:max-md:py-2.5' },\n  ],\n});\n\nexport type ZardInputTypeVariants = NonNullable<VariantProps<typeof inputVariants>['zType']>;\nexport type ZardInputSizeVariants = NonNullable<VariantProps<typeof inputVariants>['zSize']>;\nexport type ZardInputStatusVariants = NonNullable<VariantProps<typeof inputVariants>['zStatus']>;\n"
    },
    {
      "name": "index.ts",
      "content": "export * from './input.directive';\nexport * from './input.variants';\n"
    }
  ],
  "docs": {
    "overview": "# Input\n\nDisplays a form input field or a component that looks like an input field.\n",
    "api": "# API\n\n## [z-input] <span class=\"api-type-label directive\">Directive</span>\n\n> z-input is a Directive, it accepts all props which are supported by <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input\" target=\"_blank\">native input</a>.\n\nTo get a customized input, just pass the following props to the directive.\n\n| Property        | Description          | Type                          | Default   |\n| --------------- | -------------------- | ----------------------------- | --------- |\n| `[zSize]`       | input size           | `default \\| sm \\| lg`         | `default` |\n| `[zStatus]`     | input status         | `error \\| warning \\| success` | `null`    |\n| `[zBorderless]` | input without border | `boolean`                     | `false`   |\n"
  },
  "demos": [
    {
      "name": "borderless.ts",
      "content": "import { ChangeDetectionStrategy, Component } from '@angular/core';\n\nimport { ZardInputDirective } from '../input.directive';\n\n@Component({\n  selector: 'z-demo-input-borderless',\n  imports: [ZardInputDirective],\n  template: `\n    <input z-input zBorderless placeholder=\"Borderless\" />\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ZardDemoInputBorderlessComponent {}\n"
    },
    {
      "name": "default.ts",
      "content": "import { ChangeDetectionStrategy, Component, inject, type AfterViewInit } from '@angular/core';\nimport { FormBuilder, ReactiveFormsModule } from '@angular/forms';\n\nimport { ZardInputDirective } from '../input.directive';\n\n@Component({\n  selector: 'z-demo-input-default',\n  imports: [ZardInputDirective, ReactiveFormsModule],\n  template: `\n    <form [formGroup]=\"form\" class=\"flex flex-col gap-3\">\n      <input z-input placeholder=\"Name\" formControlName=\"name\" />\n      <input z-input placeholder=\"Disabled\" formControlName=\"novalue\" />\n    </form>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ZardDemoInputDefaultComponent implements AfterViewInit {\n  private fb = inject(FormBuilder);\n\n  readonly form = this.fb.group({\n    name: [''],\n    novalue: [''],\n  });\n\n  ngAfterViewInit(): void {\n    this.form.get('novalue')?.disable();\n    this.form.patchValue({ name: 'John Doe' });\n  }\n}\n"
    },
    {
      "name": "size.ts",
      "content": "import { ChangeDetectionStrategy, Component } from '@angular/core';\n\nimport { ZardInputDirective } from '../input.directive';\n\n@Component({\n  selector: 'z-demo-input-size',\n  imports: [ZardInputDirective],\n  template: `\n    <input z-input zSize=\"sm\" placeholder=\"small size\" />\n    <input z-input zSize=\"default\" placeholder=\"default size\" />\n    <input z-input zSize=\"lg\" placeholder=\"large size\" />\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ZardDemoInputSizeComponent {}\n"
    },
    {
      "name": "status.ts",
      "content": "import { ChangeDetectionStrategy, Component } from '@angular/core';\n\nimport { ZardInputDirective } from '../input.directive';\n\n@Component({\n  selector: 'z-demo-input-status',\n  imports: [ZardInputDirective],\n  template: `\n    <input z-input zStatus=\"error\" placeholder=\"Error\" />\n    <input z-input zStatus=\"warning\" placeholder=\"Warning\" />\n    <input z-input zStatus=\"success\" placeholder=\"Success\" />\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ZardDemoInputStatusComponent {}\n"
    },
    {
      "name": "text-area.ts",
      "content": "import { ChangeDetectionStrategy, Component } from '@angular/core';\n\nimport { ZardInputDirective } from '../input.directive';\n\n@Component({\n  selector: 'z-demo-input-text-area',\n  imports: [ZardInputDirective],\n  template: `\n    <div class=\"flex w-75 flex-col gap-3\">\n      <textarea z-input rows=\"8\" cols=\"12\" placeholder=\"Default\"></textarea>\n      <textarea zBorderless z-input rows=\"8\" cols=\"12\" placeholder=\"Borderless\"></textarea>\n    </div>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ZardDemoInputTextAreaComponent {}\n"
    }
  ]
}
