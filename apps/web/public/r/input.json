{
  "name": "input",
  "type": "registry:component",
  "files": [
    {
      "name": "input.directive.ts",
      "content": "import { computed, Directive, effect, ElementRef, forwardRef, inject, input, linkedSignal, model } from '@angular/core';\nimport { NG_VALUE_ACCESSOR, type ControlValueAccessor } from '@angular/forms';\n\nimport type { ClassValue } from 'clsx';\n\nimport { mergeClasses, noopFn, transform } from '@/shared/utils/merge-classes';\n\nimport {\n  inputVariants,\n  type ZardInputSizeVariants,\n  type ZardInputStatusVariants,\n  type ZardInputTypeVariants,\n} from './input.variants';\n\ntype OnTouchedType = () => void;\ntype OnChangeType = (value: string) => void;\n\n@Directive({\n  selector: 'input[z-input], textarea[z-input]',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => ZardInputDirective),\n      multi: true,\n    },\n  ],\n  host: {\n    '[class]': 'classes()',\n    '(input)': 'updateValue($event.target)',\n    '(blur)': 'onBlur()',\n  },\n  exportAs: 'zInput',\n})\nexport class ZardInputDirective implements ControlValueAccessor {\n  private readonly elementRef = inject(ElementRef);\n  private onTouched: OnTouchedType = noopFn;\n  private onChangeFn: OnChangeType = noopFn;\n\n  readonly class = input<ClassValue>('');\n  readonly zBorderless = input(false, { transform });\n  readonly zSize = input<ZardInputSizeVariants>('default');\n  readonly zStatus = input<ZardInputStatusVariants>();\n  readonly value = model<string>('');\n\n  readonly size = linkedSignal<ZardInputSizeVariants>(() => this.zSize());\n\n  protected readonly classes = computed(() =>\n    mergeClasses(\n      inputVariants({\n        zType: this.getType(),\n        zSize: this.size(),\n        zStatus: this.zStatus(),\n        zBorderless: this.zBorderless(),\n      }),\n      this.class(),\n    ),\n  );\n\n  constructor() {\n    effect(() => {\n      const value = this.value();\n\n      if (value !== undefined && value !== null) {\n        this.elementRef.nativeElement.value = value;\n      }\n    });\n  }\n\n  disable(b: boolean): void {\n    this.elementRef.nativeElement.disabled = b;\n  }\n\n  setDataSlot(name: string): void {\n    if (this.elementRef?.nativeElement?.dataset) {\n      this.elementRef.nativeElement.dataset.slot = name;\n    }\n  }\n\n  protected updateValue(target: EventTarget | null): void {\n    const el = target as HTMLInputElement | HTMLTextAreaElement | null;\n    this.value.set(el?.value ?? '');\n    this.onChangeFn(this.value());\n  }\n\n  protected onBlur() {\n    this.onTouched();\n  }\n\n  getType(): ZardInputTypeVariants {\n    const isTextarea = this.elementRef.nativeElement.tagName.toLowerCase() === 'textarea';\n    return isTextarea ? 'textarea' : 'default';\n  }\n\n  registerOnChange(fn: OnChangeType): void {\n    this.onChangeFn = fn;\n  }\n\n  registerOnTouched(fn: OnTouchedType): void {\n    this.onTouched = fn;\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disable(isDisabled);\n  }\n\n  writeValue(value?: string): void {\n    const newValue = value ?? '';\n    this.value.set(newValue);\n    this.elementRef.nativeElement.value = newValue;\n  }\n}\n"
    },
    {
      "name": "input.variants.ts",
      "content": "import { cva, type VariantProps } from 'class-variance-authority';\n\nexport type zInputIcon = 'email' | 'password' | 'text';\n\nexport const inputVariants = cva('w-full', {\n  variants: {\n    zType: {\n      default:\n        'flex rounded-md border px-4 font-normal border-input bg-transparent file:border-0 file:text-foreground file:bg-transparent file:font-medium placeholder:text-muted-foreground outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50',\n      textarea:\n        'flex pb-2 min-h-20 h-auto rounded-md border border-input bg-background px-3 py-2 text-base placeholder:text-muted-foreground outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50',\n    },\n    zSize: {\n      default: 'text-sm',\n      sm: 'text-xs',\n      lg: 'text-base',\n    },\n    zStatus: {\n      error: 'border-destructive focus-visible:ring-destructive',\n      warning: 'border-yellow-500 focus-visible:ring-yellow-500',\n      success: 'border-green-500 focus-visible:ring-green-500',\n    },\n    zBorderless: {\n      true: 'flex-1 bg-transparent border-0 outline-none focus-visible:ring-0 focus-visible:ring-offset-0 px-0 py-0',\n    },\n  },\n  defaultVariants: {\n    zType: 'default',\n    zSize: 'default',\n  },\n  compoundVariants: [\n    { zType: 'default', zSize: 'default', class: 'h-9 py-2 file:max-md:py-0' },\n    { zType: 'default', zSize: 'sm', class: 'h-8 file:md:py-2 file:max-md:py-1.5' },\n    { zType: 'default', zSize: 'lg', class: 'h-10 py-1 file:md:py-3 file:max-md:py-2.5' },\n  ],\n});\n\nexport type ZardInputTypeVariants = NonNullable<VariantProps<typeof inputVariants>['zType']>;\nexport type ZardInputSizeVariants = NonNullable<VariantProps<typeof inputVariants>['zSize']>;\nexport type ZardInputStatusVariants = NonNullable<VariantProps<typeof inputVariants>['zStatus']>;\n"
    },
    {
      "name": "index.ts",
      "content": "export * from './input.directive';\nexport * from './input.variants';\n"
    }
  ]
}
