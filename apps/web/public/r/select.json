{
  "name": "select",
  "type": "registry:component",
  "files": [
    {
      "name": "select.component.ts",
      "content": "import { Overlay, OverlayModule, OverlayPositionBuilder, type OverlayRef } from '@angular/cdk/overlay';\nimport { TemplatePortal } from '@angular/cdk/portal';\nimport { isPlatformBrowser } from '@angular/common';\nimport {\n  type AfterContentInit,\n  afterNextRender,\n  booleanAttribute,\n  ChangeDetectionStrategy,\n  Component,\n  computed,\n  contentChildren,\n  DestroyRef,\n  ElementRef,\n  forwardRef,\n  inject,\n  Injector,\n  input,\n  model,\n  type OnDestroy,\n  output,\n  PLATFORM_ID,\n  runInInjectionContext,\n  signal,\n  type TemplateRef,\n  viewChild,\n  ViewContainerRef,\n} from '@angular/core';\nimport { takeUntilDestroyed } from '@angular/core/rxjs-interop';\nimport { type ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\n\nimport type { ClassValue } from 'clsx';\nimport { filter } from 'rxjs';\n\nimport { ZardBadgeComponent } from '@/shared/components/badge';\nimport { ZardIconComponent } from '@/shared/components/icon';\nimport { ZardSelectItemComponent } from '@/shared/components/select/select-item.component';\nimport {\n  selectContentVariants,\n  selectTriggerVariants,\n  selectVariants,\n  type ZardSelectSizeVariants,\n} from '@/shared/components/select/select.variants';\nimport { mergeClasses } from '@/shared/utils/merge-classes';\n\ntype OnTouchedType = () => void;\ntype OnChangeType = (value: string) => void;\n\nconst COMPACT_MODE_WIDTH_THRESHOLD = 100;\n\n@Component({\n  selector: 'z-select, [z-select]',\n  imports: [OverlayModule, ZardBadgeComponent, ZardIconComponent],\n  template: `\n    <button\n      type=\"button\"\n      role=\"combobox\"\n      aria-controls=\"dropdown\"\n      [class]=\"triggerClasses()\"\n      [disabled]=\"zDisabled()\"\n      [attr.aria-expanded]=\"isOpen()\"\n      [attr.aria-haspopup]=\"'listbox'\"\n      [attr.data-placeholder]=\"!zValue() ? '' : null\"\n      (blur)=\"!isOpen() && isFocus.set(false)\"\n      (click)=\"toggle()\"\n      (focus)=\"onFocus()\"\n    >\n      <span class=\"flex min-w-0 flex-1 flex-wrap items-center gap-2\">\n        @for (label of selectedLabels(); track label) {\n          @if (zMultiple()) {\n            <z-badge zType=\"secondary\">\n              <span class=\"truncate\">{{ label }}</span>\n            </z-badge>\n          } @else {\n            <span class=\"truncate\">{{ label }}</span>\n          }\n        } @empty {\n          <span class=\"text-muted-foreground truncate\">{{ zPlaceholder() }}</span>\n        }\n      </span>\n      <z-icon zType=\"chevron-down\" zSize=\"lg\" class=\"opacity-50\" />\n    </button>\n\n    <ng-template #dropdownTemplate>\n      <div\n        id=\"dropdown\"\n        [class]=\"contentClasses()\"\n        role=\"listbox\"\n        [attr.data-state]=\"'open'\"\n        (keydown.{arrowdown,arrowup,enter,space,escape,home,end}.prevent)=\"onDropdownKeydown($event)\"\n        tabindex=\"-1\"\n      >\n        <div class=\"p-1\">\n          <ng-content />\n        </div>\n      </div>\n    </ng-template>\n  `,\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => ZardSelectComponent),\n      multi: true,\n    },\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  host: {\n    '[attr.data-active]': 'isFocus() ? \"\" : null',\n    '[attr.data-disabled]': 'zDisabled() ? \"\" : null',\n    '[attr.data-state]': 'isOpen() ? \"open\" : \"closed\"',\n    '[class]': 'classes()',\n    '(keydown.{enter,space,arrowdown,arrowup,escape}.prevent)': 'onTriggerKeydown($event)',\n  },\n})\nexport class ZardSelectComponent implements ControlValueAccessor, AfterContentInit, OnDestroy {\n  private readonly destroyRef = inject(DestroyRef);\n  private readonly elementRef = inject(ElementRef<HTMLElement>);\n  private readonly injector = inject(Injector);\n  private readonly overlay = inject(Overlay);\n  private readonly overlayPositionBuilder = inject(OverlayPositionBuilder);\n  private readonly viewContainerRef = inject(ViewContainerRef);\n  private readonly platformId = inject(PLATFORM_ID);\n\n  readonly dropdownTemplate = viewChild.required<TemplateRef<void>>('dropdownTemplate');\n  readonly selectItems = contentChildren(ZardSelectItemComponent);\n\n  private overlayRef?: OverlayRef;\n  private portal?: TemplatePortal;\n\n  readonly class = input<ClassValue>('');\n  readonly zDisabled = input(false, { transform: booleanAttribute });\n  readonly zLabel = input<string>('');\n  readonly zMaxLabelCount = input<number>(1);\n  readonly zMultiple = input<boolean>(false);\n  readonly zPlaceholder = input<string>('Select an option...');\n  readonly zSize = input<ZardSelectSizeVariants>('default');\n  readonly zValue = model<string | string[]>(this.zMultiple() ? [] : '');\n\n  readonly zSelectionChange = output<string | string[]>();\n\n  readonly isOpen = signal(false);\n  readonly focusedIndex = signal<number>(-1);\n  protected readonly isFocus = signal(false);\n  protected readonly isCompact = signal(false);\n\n  protected onFocus(): void {\n    if (this.isCompact()) {\n      this.isFocus.set(true);\n    }\n  }\n\n  // Compute the label based on selected value\n  readonly selectedLabels = computed<string[]>(() => {\n    const selectedValue = this.zValue();\n    if (this.zMultiple() && Array.isArray(selectedValue)) {\n      return this.provideLabelsForMultiselectMode(selectedValue);\n    }\n\n    return this.provideLabelForSingleSelectMode(selectedValue as string);\n  });\n\n  private onChange: OnChangeType = (_value: string) => {\n    // ControlValueAccessor onChange callback\n  };\n\n  private onTouched: OnTouchedType = () => {\n    // ControlValueAccessor onTouched callback\n  };\n\n  protected readonly classes = computed(() => mergeClasses(selectVariants(), this.class()));\n  protected readonly contentClasses = computed(() => mergeClasses(selectContentVariants()));\n  protected readonly triggerClasses = computed(() =>\n    mergeClasses(\n      selectTriggerVariants({\n        zSize: this.zSize(),\n      }),\n    ),\n  );\n\n  ngAfterContentInit() {\n    const hostWidth = this.elementRef.nativeElement.offsetWidth || 0;\n    // Setup select host reference for each item\n    let i = 0;\n    for (const item of this.selectItems()) {\n      item.setSelectHost({\n        selectedValue: () => (this.zMultiple() ? (this.zValue() as string[]) : [this.zValue() as string]),\n        selectItem: (value: string, label: string) => this.selectItem(value, label),\n        navigateTo: () => this.navigateTo(item, i),\n      });\n      item.zSize.set(this.zSize());\n      i++;\n\n      if (hostWidth <= COMPACT_MODE_WIDTH_THRESHOLD) {\n        this.isCompact.set(true);\n        item.zMode.set('compact');\n      }\n    }\n  }\n\n  ngOnDestroy() {\n    this.destroyOverlay();\n  }\n\n  onTriggerKeydown(event: Event) {\n    const { key } = event as KeyboardEvent;\n    switch (key) {\n      case 'Enter':\n      case ' ':\n      case 'ArrowDown':\n      case 'ArrowUp':\n        if (!this.isOpen()) {\n          this.open();\n        }\n        break;\n      case 'Escape':\n        if (this.isOpen()) {\n          this.close();\n        }\n        break;\n    }\n  }\n\n  onDropdownKeydown(e: Event) {\n    const { key } = e as KeyboardEvent;\n    const items = this.getSelectItems();\n\n    switch (key) {\n      case 'ArrowDown':\n        this.navigateItems(1, items);\n        break;\n      case 'ArrowUp':\n        this.navigateItems(-1, items);\n        break;\n      case 'Enter':\n      case ' ':\n        this.selectFocusedItem(items);\n        break;\n      case 'Escape':\n        this.close();\n        this.focusButton();\n        break;\n      case 'Home':\n        this.focusFirstItem(items);\n        break;\n      case 'End':\n        this.focusLastItem(items);\n        break;\n    }\n  }\n\n  toggle() {\n    if (this.zDisabled()) {\n      return;\n    }\n\n    if (this.isOpen()) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n\n  selectItem(value: string, label: string) {\n    if (value === undefined || value === null || value === '') {\n      console.warn('Attempted to select item with invalid value:', { value, label });\n      return;\n    }\n\n    this.zValue.update(selectedValues => {\n      if (Array.isArray(selectedValues)) {\n        return selectedValues.includes(value) ? selectedValues.filter(v => v !== value) : [...selectedValues, value];\n      }\n\n      return value;\n    });\n    this.onChange(value);\n    this.zSelectionChange.emit(this.zValue());\n\n    if (this.zMultiple()) {\n      // in multiple mode it can happen that button changes size because of selection badges,\n      // which requires overlay position to update\n      this.updateOverlayPosition();\n    } else {\n      this.close();\n\n      // Return focus to the button after selection\n      setTimeout(() => {\n        this.focusButton();\n      }, 0);\n    }\n  }\n\n  private navigateTo(element: ZardSelectItemComponent, index: number): void {\n    this.focusedIndex.set(index);\n    this.updateItemFocus(this.getSelectItems(true), index);\n  }\n\n  private updateOverlayPosition(): void {\n    setTimeout(() => {\n      this.overlayRef?.updatePosition();\n    }, 0);\n  }\n\n  private provideLabelsForMultiselectMode(selectedValue: string[]): string[] {\n    const labelsToShowCount = selectedValue.length - this.zMaxLabelCount();\n    const labels = [];\n    let index = 0;\n    for (const value of selectedValue) {\n      const matchingItem = this.getMatchingItem(value);\n      if (matchingItem) {\n        labels.push(matchingItem.label());\n        index++;\n      }\n      if (labelsToShowCount && this.zMaxLabelCount() && index === this.zMaxLabelCount()) {\n        labels.push(`${labelsToShowCount} more item${labelsToShowCount > 1 ? 's' : ''} selected`);\n        break;\n      }\n    }\n    return labels;\n  }\n\n  private provideLabelForSingleSelectMode(selectedValue: string): string[] {\n    const manualLabel = this.zLabel();\n    if (manualLabel) {\n      return [manualLabel];\n    }\n\n    const matchingItem = this.getMatchingItem(selectedValue);\n    if (matchingItem) {\n      return [matchingItem.label()];\n    }\n\n    return selectedValue ? [selectedValue] : [];\n  }\n\n  private open() {\n    if (this.isOpen()) {\n      return;\n    }\n\n    // Create overlay if it doesn't exist\n    if (!this.overlayRef) {\n      this.createOverlay();\n    }\n\n    if (!this.overlayRef) {\n      return;\n    }\n\n    const hostWidth = this.elementRef.nativeElement.offsetWidth || 0;\n\n    if (this.overlayRef.hasAttached()) {\n      this.overlayRef.detach();\n    }\n\n    this.portal = new TemplatePortal(this.dropdownTemplate(), this.viewContainerRef);\n\n    this.overlayRef.attach(this.portal);\n    this.overlayRef.updateSize({ width: hostWidth });\n    this.isOpen.set(true);\n    this.updateFocusWhenNormalMode();\n\n    this.determinePortalWidthOnOpen(hostWidth);\n  }\n\n  private setFocusOnOpen(): void {\n    this.focusDropdown();\n    this.focusSelectedItem();\n  }\n\n  private close() {\n    if (this.overlayRef?.hasAttached()) {\n      this.overlayRef.detach();\n    }\n    this.isOpen.set(false);\n    this.focusedIndex.set(-1);\n    this.onTouched();\n    this.updateFocusWhenNormalMode();\n  }\n\n  private updateFocusWhenNormalMode(): void {\n    if (!this.isCompact()) {\n      this.isFocus.set(!this.isOpen());\n    }\n  }\n\n  private getMatchingItem(value: string): ZardSelectItemComponent | undefined {\n    return this.selectItems()?.find(item => item.zValue() === value);\n  }\n\n  private determinePortalWidthOnOpen(portalWidth: number): void {\n    runInInjectionContext(this.injector, () => {\n      afterNextRender(() => {\n        if (!this.overlayRef || !this.overlayRef.hasAttached()) {\n          return;\n        }\n\n        const overlayPaneElement = this.overlayRef.overlayElement;\n        const textElements = Array.from(\n          overlayPaneElement.querySelectorAll<HTMLElement>(\n            'z-select-item > span.truncate, [z-select-item] > span.truncate',\n          ),\n        );\n        let isOverflow = false;\n        for (const textElement of textElements) {\n          if (textElement.scrollWidth > textElement.clientWidth + 1) {\n            isOverflow = true;\n            break;\n          }\n        }\n\n        if (!isOverflow) {\n          this.setFocusOnOpen();\n          return;\n        }\n\n        const selectItems = this.selectItems();\n        let itemMaxWidth = 0;\n        for (const item of selectItems) {\n          itemMaxWidth = Math.max(itemMaxWidth, item.elementRef.nativeElement.scrollWidth);\n        }\n\n        const [selectItem] = selectItems;\n        if (isOverflow && selectItem) {\n          const elementStyles = getComputedStyle(selectItem.elementRef.nativeElement);\n          const leftPadding = Number.parseFloat(elementStyles.getPropertyValue('padding-left')) || 0;\n          const rightPadding = Number.parseFloat(elementStyles.getPropertyValue('padding-right')) || 0;\n          itemMaxWidth += leftPadding + rightPadding;\n        }\n\n        itemMaxWidth = Math.max(itemMaxWidth, portalWidth);\n        this.overlayRef.updateSize({ width: itemMaxWidth });\n        this.overlayRef.updatePosition();\n\n        this.setFocusOnOpen();\n      });\n    });\n  }\n\n  private createOverlay() {\n    if (this.overlayRef) {\n      return;\n    } // Already created\n\n    if (isPlatformBrowser(this.platformId)) {\n      try {\n        const positionStrategy = this.overlayPositionBuilder\n          .flexibleConnectedTo(this.elementRef)\n          .withPositions([\n            {\n              originX: 'center',\n              originY: 'bottom',\n              overlayX: 'center',\n              overlayY: 'top',\n              offsetY: 4,\n            },\n            {\n              originX: 'center',\n              originY: 'top',\n              overlayX: 'center',\n              overlayY: 'bottom',\n              offsetY: -4,\n            },\n          ])\n          .withPush(false);\n\n        const elementWidth = this.elementRef.nativeElement.offsetWidth || 200;\n\n        this.overlayRef = this.overlay.create({\n          positionStrategy,\n          hasBackdrop: false,\n          scrollStrategy: this.overlay.scrollStrategies.reposition(),\n          width: elementWidth,\n          maxHeight: 384, // max-h-96 equivalent\n        });\n        this.overlayRef\n          .outsidePointerEvents()\n          .pipe(\n            filter(event => !this.elementRef.nativeElement.contains(event.target)),\n            takeUntilDestroyed(this.destroyRef),\n          )\n          .subscribe(() => {\n            this.isFocus.set(false);\n            this.close();\n          });\n      } catch (error) {\n        console.error('Error creating overlay:', error);\n      }\n    }\n  }\n\n  private destroyOverlay() {\n    if (this.overlayRef) {\n      this.overlayRef.dispose();\n      this.overlayRef = undefined;\n    }\n  }\n\n  private getSelectItems(ignoreFilter = false): HTMLElement[] {\n    if (!this.overlayRef?.hasAttached()) {\n      return [];\n    }\n    const dropdownElement = this.overlayRef.overlayElement;\n    return Array.from(dropdownElement.querySelectorAll<HTMLElement>('z-select-item, [z-select-item]')).filter(\n      item => ignoreFilter || item.dataset['disabled'] === undefined,\n    );\n  }\n\n  private navigateItems(direction: number, items: HTMLElement[]) {\n    if (items.length === 0) {\n      return;\n    }\n\n    const currentIndex = this.focusedIndex();\n    let nextIndex = currentIndex + direction;\n\n    if (nextIndex < 0) {\n      nextIndex = items.length - 1;\n    } else if (nextIndex >= items.length) {\n      nextIndex = 0;\n    }\n\n    this.focusedIndex.set(nextIndex);\n    this.updateItemFocus(items, nextIndex);\n  }\n\n  private selectFocusedItem(items: HTMLElement[]) {\n    const currentIndex = this.focusedIndex();\n    if (currentIndex >= 0 && currentIndex < items.length) {\n      const item = items[currentIndex];\n      const value = item.getAttribute('value');\n      const label = item.textContent?.trim() ?? '';\n\n      if (value === null || value === undefined) {\n        console.warn('No value attribute found on selected item:', item);\n        return;\n      }\n\n      this.selectItem(value, label);\n    }\n  }\n\n  private focusFirstItem(items: HTMLElement[]) {\n    if (items.length > 0) {\n      this.focusedIndex.set(0);\n      this.updateItemFocus(items, 0);\n    }\n  }\n\n  private focusLastItem(items: HTMLElement[]) {\n    if (items.length > 0) {\n      const lastIndex = items.length - 1;\n      this.focusedIndex.set(lastIndex);\n      this.updateItemFocus(items, lastIndex);\n    }\n  }\n\n  private updateItemFocus(items: HTMLElement[], focusedIndex: number) {\n    for (let index = 0; index < items.length; index++) {\n      const item = items[index];\n      if (index === focusedIndex) {\n        item.focus();\n        item.setAttribute('aria-selected', 'true');\n        item.setAttribute('data-selected', 'true');\n      } else {\n        item.removeAttribute('aria-selected');\n        item.removeAttribute('data-selected');\n      }\n    }\n  }\n\n  private focusDropdown() {\n    if (this.overlayRef?.hasAttached()) {\n      const dropdownElement = this.overlayRef.overlayElement.querySelector('[role=\"listbox\"]') as HTMLElement;\n      if (dropdownElement) {\n        dropdownElement.focus();\n      }\n    }\n  }\n\n  private focusButton() {\n    const button = this.elementRef.nativeElement.querySelector('button');\n    if (button) {\n      button.focus();\n    }\n  }\n\n  private focusSelectedItem() {\n    const items = this.getSelectItems();\n    if (items.length === 0) {\n      return;\n    }\n\n    // Find the index of the currently selected item\n    let selectedValue;\n    if (Array.isArray(this.zValue()) && this.zValue().length) {\n      [selectedValue] = this.zValue();\n    } else {\n      selectedValue = this.zValue();\n    }\n\n    let selectedIndex = items.findIndex(item => item.getAttribute('value') === selectedValue);\n\n    // If no item is selected, focus the first item\n    if (selectedIndex === -1) {\n      selectedIndex = 0;\n    }\n\n    this.focusedIndex.set(selectedIndex);\n    this.updateItemFocus(items, selectedIndex);\n  }\n\n  // ControlValueAccessor implementation\n  writeValue(value: string | string[] | null): void {\n    if (this.zMultiple() && Array.isArray(value)) {\n      this.zValue.set(value);\n    } else {\n      this.zValue.set(value ?? '');\n    }\n  }\n\n  registerOnChange(fn: (value: string) => void): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: () => void): void {\n    this.onTouched = fn;\n  }\n\n  setDisabledState(): void {\n    // The disabled state is handled by the disabled input\n  }\n}\n"
    },
    {
      "name": "select-item.component.ts",
      "content": "import {\n  booleanAttribute,\n  ChangeDetectionStrategy,\n  Component,\n  computed,\n  ElementRef,\n  inject,\n  input,\n  linkedSignal,\n  signal,\n} from '@angular/core';\n\nimport { ZardIconComponent } from '@/shared/components/icon';\nimport {\n  selectItemIconVariants,\n  selectItemVariants,\n  type ZardSelectItemModeVariants,\n  type ZardSelectSizeVariants,\n} from '@/shared/components/select/select.variants';\nimport { mergeClasses, noopFn } from '@/shared/utils/merge-classes';\n\n// Interface to avoid circular dependency\ninterface SelectHost {\n  selectedValue(): string[];\n  selectItem(value: string, label: string): void;\n  navigateTo(): void;\n}\n\n@Component({\n  selector: 'z-select-item, [z-select-item]',\n  imports: [ZardIconComponent],\n  template: `\n    @if (isSelected()) {\n      <span [class]=\"iconClasses()\">\n        <z-icon zType=\"check\" [zStrokeWidth]=\"strokeWidth()\" aria-hidden=\"true\" data-testid=\"check-icon\" />\n      </span>\n    }\n    <span class=\"truncate\">\n      <ng-content />\n    </span>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  host: {\n    role: 'option',\n    tabindex: '-1',\n    '[class]': 'classes()',\n    '[attr.value]': 'zValue()',\n    '[attr.data-disabled]': 'zDisabled() ? \"\" : null',\n    '[attr.data-selected]': 'isSelected() ? \"\" : null',\n    '[attr.aria-selected]': 'isSelected()',\n    '(click)': 'onClick()',\n    '(mouseenter)': 'onMouseEnter()',\n    '(keydown.{tab}.prevent)': 'noopFn',\n  },\n})\nexport class ZardSelectItemComponent {\n  readonly elementRef = inject(ElementRef<HTMLElement>);\n\n  readonly zValue = input.required<string>();\n  readonly zDisabled = input(false, { transform: booleanAttribute });\n  readonly class = input<string>('');\n\n  private readonly select = signal<SelectHost | null>(null);\n  noopFn = noopFn;\n\n  readonly label = linkedSignal<string>(() => {\n    const element = this.elementRef.nativeElement;\n    return (element.textContent ?? element.innerText)?.trim() ?? '';\n  });\n\n  readonly zMode = signal<ZardSelectItemModeVariants>('normal');\n  readonly zSize = signal<ZardSelectSizeVariants>('default');\n\n  protected readonly classes = computed(() =>\n    mergeClasses(selectItemVariants({ zMode: this.zMode(), zSize: this.zSize() }), this.class()),\n  );\n\n  protected readonly iconClasses = computed(() =>\n    mergeClasses(selectItemIconVariants({ zMode: this.zMode(), zSize: this.zSize() })),\n  );\n\n  protected readonly strokeWidth = computed(() => (this.zMode() === 'compact' ? 3 : 2));\n\n  protected readonly isSelected = computed(() => this.select()?.selectedValue().includes(this.zValue()) ?? false);\n\n  setSelectHost(selectHost: SelectHost) {\n    this.select.set(selectHost);\n  }\n\n  onMouseEnter() {\n    if (this.zDisabled()) {\n      return;\n    }\n    this.select()?.navigateTo();\n  }\n\n  onClick() {\n    if (this.zDisabled()) {\n      return;\n    }\n    this.select()?.selectItem(this.zValue(), this.label());\n  }\n}\n"
    },
    {
      "name": "select.variants.ts",
      "content": "import { cva, type VariantProps } from 'class-variance-authority';\n\nimport { mergeClasses } from '@/shared/utils/merge-classes';\n\nexport const selectVariants = cva(\n  mergeClasses(\n    'relative inline-block w-full rounded-md group data-active:border data-active:border-ring data-active:ring-ring/50 data-active:ring-[3px]',\n    '[&_button]:focus-visible:border [&_button]:focus-visible:border-ring [&_button]:focus-visible:ring-ring/50 [&_button]:focus-visible:ring-[3px]',\n  ),\n);\n\nexport const selectTriggerVariants = cva(\n  mergeClasses(\n    'flex w-full items-center justify-between gap-2 rounded-md border border-input bg-transparent',\n    'shadow-xs transition-[color,box-shadow] outline-none cursor-pointer disabled:cursor-not-allowed',\n    'disabled:opacity-50 data-placeholder:text-muted-foreground [&_svg:not([class*=\"text-\"])]:text-muted-foreground',\n    'dark:bg-input/30 dark:hover:bg-input/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40',\n    'aria-invalid:border-destructive [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*=\"size-\"])]:size-4',\n  ),\n  {\n    variants: {\n      zSize: {\n        sm: 'min-h-8 py-1 text-xs px-2',\n        default: 'min-h-9 py-1.5 px-3 text-sm',\n        lg: 'min-h-10 py-2 text-base px-4',\n      },\n    },\n    defaultVariants: {\n      zSize: 'default',\n    },\n  },\n);\nexport const selectContentVariants = cva(\n  'z-9999 min-w-full scrollbar-hide overflow-y-auto rounded-md border bg-popover text-popover-foreground shadow-lg animate-in fade-in-0 zoom-in-95',\n);\nexport const selectItemVariants = cva(\n  'relative flex min-w-full cursor-pointer text-nowrap items-center gap-2 rounded-sm mb-0.5 outline-hidden select-none hover:bg-accent hover:text-accent-foreground data-selected:bg-accent data-selected:text-accent-foreground data-disabled:pointer-events-none data-disabled:opacity-50 data-disabled:cursor-not-allowed data-disabled:hover:bg-transparent data-disabled:hover:text-current [&_svg:not([class*=\"text-\"])]:text-muted-foreground [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*=\"size-\"])]:size-4',\n  {\n    variants: {\n      zSize: {\n        sm: 'min-h-8 py-1 text-xs',\n        default: 'min-h-9 py-1.5 text-sm',\n        lg: 'min-h-10 py-2 text-base',\n      },\n      zMode: {\n        normal: 'pr-8 pl-2',\n        compact: 'pl-6.5 pr-2',\n      },\n    },\n    compoundVariants: [\n      {\n        zMode: 'compact',\n        zSize: 'sm',\n        class: 'pl-5 pr-2',\n      },\n    ],\n  },\n);\n\nexport const selectItemIconVariants = cva('absolute flex size-3.5 items-center justify-center', {\n  variants: {\n    // zSize variants are placeholders for compound variant matching\n    zSize: {\n      sm: '',\n      default: '',\n      lg: '',\n    },\n    zMode: {\n      normal: 'right-2',\n      compact: 'left-2',\n    },\n  },\n  compoundVariants: [\n    {\n      zMode: 'compact',\n      zSize: 'sm',\n      class: 'left-1',\n    },\n  ],\n});\n\nexport type ZardSelectSizeVariants = NonNullable<VariantProps<typeof selectTriggerVariants>['zSize']>;\nexport type ZardSelectItemModeVariants = NonNullable<VariantProps<typeof selectItemVariants>['zMode']>;\n"
    },
    {
      "name": "select.imports.ts",
      "content": "import { ZardSelectItemComponent } from '@/shared/components/select/select-item.component';\nimport { ZardSelectComponent } from '@/shared/components/select/select.component';\n\nexport const ZardSelectImports = [ZardSelectComponent, ZardSelectItemComponent] as const;\n"
    },
    {
      "name": "index.ts",
      "content": "export * from '@/shared/components/select/select.component';\nexport * from '@/shared/components/select/select-item.component';\nexport * from '@/shared/components/select/select.imports';\nexport * from '@/shared/components/select/select.variants';\n"
    }
  ],
  "registryDependencies": [
    "badge",
    "icon"
  ],
  "docs": {
    "overview": "# Select\n\nDisplays a list of options for the user to pick fromâ€”triggered by a button.\n",
    "api": "# API\n\n### z-select\n\n> A customizable select component that allows single value selection.\n\n| Input              | Description                               | Type                 | Default                 |\n| ------------------ | ----------------------------------------- | -------------------- | ----------------------- |\n| `[class]`          | Custom CSS classes                        | `string`             | `''`                    |\n| `[zDisabled]`      | Disables the select                       | `boolean`            | `false`                 |\n| `[zLabel]`         | Optional label for the select             | `string`             | `''`                    |\n| `[zMaxLabelCount]` | Limits visible labels in multiselect mode | `number`             | `1`                     |\n| `[zMultiple]`      | Multiselect mode                          | `boolean`            | `false`                 |\n| `[zPlaceholder]`   | Placeholder text                          | `string`             | `'Select an option...'` |\n| `[(zValue)]`       | Selected value                            | `string \\| string[]` | `'' \\| []`              |\n\n| Output               | Description                             | Payload              |\n| -------------------- | --------------------------------------- | -------------------- |\n| `(zSelectionChange)` | Emitted when the selected value changes | `string \\| string[]` |\n\n### z-select-item\n\n> Represents an individual item inside a `z-select` component.\n\n| Input         | Description                         | Type      | Default |\n| ------------- | ----------------------------------- | --------- | ------- |\n| `[class]`     | Custom CSS classes                  | `string`  | `''`    |\n| `[zValue]`    | The value associated with this item | `string`  | `''`    |\n| `[zDisabled]` | Disables selection for this item    | `boolean` | `false` |\n"
  },
  "demos": [
    {
      "name": "default.ts",
      "content": "import { ChangeDetectionStrategy, Component } from '@angular/core';\n\nimport { ZardBadgeComponent } from '@/shared/components/badge';\nimport { ZardSelectImports } from '@/shared/components/select/select.imports';\n\n@Component({\n  selector: 'z-demo-select-basic',\n  imports: [ZardBadgeComponent, ZardSelectImports],\n  template: `\n    <div class=\"flex flex-col gap-4\">\n      <span>\n        Selected value:\n        @if (selectedValue) {\n          <z-badge>{{ selectedValue }}</z-badge>\n        }\n      </span>\n      <z-select class=\"w-75\" zPlaceholder=\"Select a fruit\" [(zValue)]=\"selectedValue\">\n        <z-select-item zValue=\"apple\">Apple</z-select-item>\n        <z-select-item zValue=\"banana\">Banana</z-select-item>\n        <z-select-item zValue=\"blueberry\">Blueberry</z-select-item>\n        <z-select-item zValue=\"grapes\">Grapes</z-select-item>\n        <z-select-item zValue=\"pineapple\" zDisabled>Pineapple</z-select-item>\n      </z-select>\n    </div>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ZardDemoSelectBasicComponent {\n  selectedValue = '';\n}\n"
    },
    {
      "name": "multi-select.ts",
      "content": "import { ChangeDetectionStrategy, Component, signal } from '@angular/core';\n\nimport { ZardSelectImports } from '@/shared/components/select/select.imports';\n\n@Component({\n  selector: 'z-demo-multi-select-basic',\n  imports: [ZardSelectImports],\n  template: `\n    <div class=\"flex h-100 w-75 flex-col gap-4\">\n      <p class=\"text-muted-foreground text-sm\">Selected fruits: {{ selectedValues().join(', ') }}</p>\n      <z-select\n        zPlaceholder=\"Select multiple fruits\"\n        [zMultiple]=\"true\"\n        [zMaxLabelCount]=\"3\"\n        [(zValue)]=\"selectedValues\"\n      >\n        <z-select-item zValue=\"apple\">Apple</z-select-item>\n        <z-select-item zValue=\"banana\">Banana</z-select-item>\n        <z-select-item zValue=\"blueberry\">Blueberry</z-select-item>\n        <z-select-item zValue=\"grapes\">Grapes</z-select-item>\n        <z-select-item zValue=\"pineapple\">Pineapple</z-select-item>\n        <z-select-item zValue=\"strawberry\">Strawberry</z-select-item>\n        <z-select-item zValue=\"watermelon\">Watermelon</z-select-item>\n        <z-select-item zValue=\"kiwi\">Kiwi</z-select-item>\n        <z-select-item zValue=\"mango\">Mango</z-select-item>\n      </z-select>\n    </div>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ZardDemoMultiSelectBasicComponent {\n  readonly selectedValues = signal<string[]>([]);\n}\n"
    }
  ]
}
