{
  "name": "carousel",
  "type": "registry:component",
  "files": [
    {
      "name": "carousel.component.ts",
      "content": "import { NgTemplateOutlet } from '@angular/common';\nimport {\n  ChangeDetectionStrategy,\n  Component,\n  input,\n  signal,\n  ViewEncapsulation,\n  output,\n  computed,\n  viewChild,\n  type InputSignal,\n  type Signal,\n} from '@angular/core';\n\nimport type { ClassValue } from 'clsx';\nimport type { EmblaCarouselType, EmblaEventType, EmblaOptionsType, EmblaPluginType } from 'embla-carousel';\nimport { EmblaCarouselDirective } from 'embla-carousel-angular';\n\nimport { ZardButtonComponent } from '@/shared/components/button';\nimport {\n  carouselNextButtonVariants,\n  carouselPreviousButtonVariants,\n  carouselVariants,\n  type ZardCarouselControlsVariants,\n  type ZardCarouselOrientationVariants,\n} from '@/shared/components/carousel/carousel.variants';\nimport { ZardIconComponent } from '@/shared/components/icon';\nimport { mergeClasses } from '@/shared/utils/merge-classes';\n\n@Component({\n  selector: 'z-carousel',\n  imports: [NgTemplateOutlet, EmblaCarouselDirective, ZardButtonComponent, ZardIconComponent],\n  template: `\n    <div class=\"relative\">\n      <div\n        emblaCarousel\n        #emblaRef=\"emblaCarousel\"\n        [class]=\"classes()\"\n        [options]=\"options()\"\n        [plugins]=\"zPlugins()\"\n        [subscribeToEvents]=\"subscribeToEvents\"\n        (emblaChange)=\"onEmblaChange($event, emblaRef.emblaApi!)\"\n        aria-roledescription=\"carousel\"\n        role=\"region\"\n        tabindex=\"0\"\n      >\n        <ng-content />\n\n        @let controls = zControls();\n        @if (controls === 'button') {\n          <ng-container *ngTemplateOutlet=\"buttonControls\" />\n        } @else if (controls === 'dot') {\n          <ng-container *ngTemplateOutlet=\"dotControls\" />\n        }\n      </div>\n    </div>\n\n    <ng-template #buttonControls>\n      <button\n        type=\"button\"\n        z-button\n        zType=\"outline\"\n        [class]=\"prevBtnClasses()\"\n        [disabled]=\"!canScrollPrev()\"\n        (click)=\"slidePrevious()\"\n        aria-label=\"Previous slide\"\n      >\n        <z-icon zType=\"chevron-left\" class=\"size-4\" />\n      </button>\n      <button\n        type=\"button\"\n        z-button\n        zType=\"outline\"\n        [class]=\"nextBtnClasses()\"\n        [disabled]=\"!canScrollNext()\"\n        (click)=\"slideNext()\"\n        aria-label=\"Next slide\"\n      >\n        <z-icon zType=\"chevron-right\" class=\"size-4\" />\n      </button>\n    </ng-template>\n\n    <ng-template #dotControls>\n      <div class=\"mt-2 flex justify-center gap-1\">\n        @for (dot of dots(); track index; let index = $index) {\n          <span\n            [class]=\"index === selectedIndex() ? 'cursor-default' : 'cursor-pointer'\"\n            role=\"button\"\n            tabindex=\"0\"\n            (click)=\"goTo(index)\"\n          >\n            <z-icon\n              zType=\"circle-small\"\n              [zStrokeWidth]=\"0\"\n              [class]=\"'block size-4 ' + (index === selectedIndex() ? 'fill-primary' : 'fill-border')\"\n            />\n          </span>\n        }\n      </div>\n    </ng-template>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n  host: {\n    '(keydown.arrowleft.prevent)': 'slidePrevious()',\n    '(keydown.arrowright.prevent)': 'slideNext()',\n  },\n})\nexport class ZardCarouselComponent {\n  protected readonly emblaRef = viewChild(EmblaCarouselDirective);\n\n  // Public signals and outputs\n  readonly class = input<ClassValue>('');\n  readonly zOptions: InputSignal<EmblaOptionsType> = input<EmblaOptionsType>({ loop: false });\n  readonly zPlugins: InputSignal<EmblaPluginType[]> = input<EmblaPluginType[]>([]);\n  readonly zOrientation = input<ZardCarouselOrientationVariants>('horizontal');\n  readonly zControls = input<ZardCarouselControlsVariants>('button');\n  readonly zInited = output<EmblaCarouselType>();\n  readonly zSelected = output<void>();\n\n  // State signals\n  protected readonly selectedIndex = signal<number>(0);\n  protected readonly canScrollPrev = signal<boolean>(false);\n  protected readonly canScrollNext = signal<boolean>(false);\n  protected readonly scrollSnaps = signal<number[]>([]);\n  protected readonly subscribeToEvents: EmblaEventType[] = ['init', 'select', 'reInit'];\n  protected readonly options: Signal<EmblaOptionsType> = computed(() => ({\n    ...this.zOptions(),\n    axis: this.zOrientation() === 'horizontal' ? 'x' : 'y',\n  }));\n\n  protected readonly dots = computed(() => new Array<string>(this.scrollSnaps().length).fill('.'));\n\n  #index = -1;\n\n  onEmblaChange(type: EmblaEventType, emblaApi: EmblaCarouselType): void {\n    if (type === 'init' || type === 'reInit') {\n      this.scrollSnaps.set(emblaApi.scrollSnapList());\n      this.checkNavigation(emblaApi);\n      if (type === 'init') {\n        this.zInited.emit(emblaApi);\n      }\n      return;\n    }\n\n    if (type === 'select' && emblaApi.selectedScrollSnap() !== this.#index) {\n      this.checkNavigation(emblaApi);\n      this.zSelected.emit();\n    }\n  }\n\n  protected slidePrevious(): void {\n    const emblaRef = this.emblaRef();\n    if (emblaRef) {\n      emblaRef.scrollPrev();\n    }\n  }\n\n  protected slideNext(): void {\n    const emblaRef = this.emblaRef();\n    if (emblaRef) {\n      emblaRef.scrollNext();\n    }\n  }\n\n  protected goTo(index: number): void {\n    const emblaRef = this.emblaRef();\n    if (emblaRef) {\n      emblaRef.scrollTo(index);\n    }\n  }\n\n  private checkNavigation(emblaApi: EmblaCarouselType): void {\n    this.#index = emblaApi.selectedScrollSnap();\n    this.selectedIndex.set(emblaApi.selectedScrollSnap());\n    this.canScrollPrev.set(emblaApi.canScrollPrev());\n    this.canScrollNext.set(emblaApi.canScrollNext());\n  }\n\n  protected readonly classes = computed(() =>\n    mergeClasses(carouselVariants({ zOrientation: this.zOrientation() }), this.class()),\n  );\n\n  protected readonly prevBtnClasses = computed(() =>\n    mergeClasses(carouselPreviousButtonVariants({ zOrientation: this.zOrientation() })),\n  );\n\n  protected readonly nextBtnClasses = computed(() =>\n    mergeClasses(carouselNextButtonVariants({ zOrientation: this.zOrientation() })),\n  );\n}\n"
    },
    {
      "name": "carousel.variants.ts",
      "content": "import { cva, type VariantProps } from 'class-variance-authority';\n\nexport const carouselVariants = cva('overflow-hidden', {\n  variants: {\n    zOrientation: {\n      horizontal: '',\n      vertical: 'h-full',\n    },\n    zControls: {\n      none: '',\n      button: '',\n      dot: '',\n    },\n  },\n  defaultVariants: {\n    zOrientation: 'horizontal',\n  },\n});\n\nexport const carouselContentVariants = cva('flex', {\n  variants: {\n    zOrientation: {\n      horizontal: '-ml-4 mr-0.5',\n      vertical: '-mt-4 flex-col',\n    },\n  },\n  defaultVariants: {\n    zOrientation: 'horizontal',\n  },\n});\n\nexport const carouselItemVariants = cva('min-w-0 shrink-0 grow-0 basis-full', {\n  variants: {\n    zOrientation: {\n      horizontal: 'pl-4',\n      vertical: 'pt-5',\n    },\n  },\n  defaultVariants: {\n    zOrientation: 'horizontal',\n  },\n});\n\nexport const carouselPreviousButtonVariants = cva('absolute size-8 rounded-full', {\n  variants: {\n    zOrientation: {\n      horizontal: 'top-1/2 -left-12.5 -translate-y-1/2',\n      vertical: '-top-12 left-1/2 -translate-x-1/2 rotate-90',\n    },\n  },\n  defaultVariants: {\n    zOrientation: 'horizontal',\n  },\n});\n\nexport const carouselNextButtonVariants = cva('absolute size-8 rounded-full', {\n  variants: {\n    zOrientation: {\n      horizontal: 'top-1/2 -right-12 -translate-y-1/2',\n      vertical: '-bottom-12 left-1/2 -translate-x-1/2 rotate-90',\n    },\n  },\n  defaultVariants: {\n    zOrientation: 'horizontal',\n  },\n});\n\nexport type ZardCarouselOrientationVariants = NonNullable<VariantProps<typeof carouselVariants>['zOrientation']>;\nexport type ZardCarouselControlsVariants = NonNullable<VariantProps<typeof carouselVariants>['zControls']>;\n"
    },
    {
      "name": "carousel-content.component.ts",
      "content": "import { ChangeDetectionStrategy, Component, ViewEncapsulation, computed, inject, input } from '@angular/core';\n\nimport { type ClassValue } from 'clsx';\n\nimport { ZardCarouselComponent } from '@/shared/components/carousel/carousel.component';\nimport { carouselContentVariants } from '@/shared/components/carousel/carousel.variants';\nimport { mergeClasses } from '@/shared/utils/merge-classes';\n\n@Component({\n  selector: 'z-carousel-content',\n  imports: [],\n  template: `\n    <ng-content />\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n  host: {\n    '[class]': 'classes()',\n  },\n})\nexport class ZardCarouselContentComponent {\n  readonly #parent = inject(ZardCarouselComponent);\n  readonly #orientation = computed<'horizontal' | 'vertical'>(() => this.#parent.zOrientation());\n  readonly class = input<ClassValue>('');\n  protected readonly classes = computed(() =>\n    mergeClasses(carouselContentVariants({ zOrientation: this.#orientation() }), this.class()),\n  );\n}\n"
    },
    {
      "name": "carousel-item.component.ts",
      "content": "import { ChangeDetectionStrategy, Component, ViewEncapsulation, computed, inject, input } from '@angular/core';\n\nimport { type ClassValue } from 'clsx';\n\nimport { ZardCarouselComponent } from '@/shared/components/carousel/carousel.component';\nimport { carouselItemVariants } from '@/shared/components/carousel/carousel.variants';\nimport { mergeClasses } from '@/shared/utils/merge-classes';\n\n@Component({\n  selector: 'z-carousel-item',\n  template: `\n    <ng-content />\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n  host: {\n    '[class]': 'classes()',\n    role: 'group',\n    'aria-roledescription': 'slide',\n  },\n})\nexport class ZardCarouselItemComponent {\n  readonly #parent = inject(ZardCarouselComponent);\n\n  readonly #orientation = computed<'horizontal' | 'vertical'>(() => this.#parent.zOrientation());\n  readonly class = input<ClassValue>('');\n  protected readonly classes = computed(() =>\n    mergeClasses(carouselItemVariants({ zOrientation: this.#orientation() }), this.class()),\n  );\n}\n"
    },
    {
      "name": "carousel-plugins.service.ts",
      "content": "import { Injectable } from '@angular/core';\n\nimport type { EmblaPluginType } from 'embla-carousel';\n\n/**\n * Service to create and manage Embla Carousel plugins\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class ZardCarouselPluginsService {\n  /**\n   * Creates an autoplay plugin for the carousel\n   */\n  async createAutoplayPlugin(\n    options: {\n      delay?: number; // ms\n      jump?: boolean;\n      stopOnInteraction?: boolean;\n      stopOnMouseEnter?: boolean;\n      playOnInit?: boolean;\n      rootNode?: (emblaRoot: HTMLElement) => HTMLElement | null;\n    } = {},\n  ) {\n    try {\n      const AutoplayModule = await import('embla-carousel-autoplay');\n      const Autoplay = AutoplayModule.default;\n      return Autoplay(options);\n    } catch (err) {\n      console.error('Error loading Autoplay plugin:', err);\n      throw new Error('Make sure embla-carousel-autoplay is installed.');\n    }\n  }\n\n  /**\n   * Helper method to create autoplay plugin with HTMLElement\n   * Converts HTMLElement to the function format expected by Embla\n   */\n  async createAutoplayPluginWithElement(\n    options: {\n      delay?: number;\n      jump?: boolean;\n      stopOnInteraction?: boolean;\n      stopOnMouseEnter?: boolean;\n      playOnInit?: boolean;\n      rootElement?: HTMLElement;\n    } = {},\n  ) {\n    const { rootElement, ...restOptions } = options;\n    const autoplayOptions = {\n      ...restOptions,\n      ...(rootElement && {\n        rootNode: () => rootElement,\n      }),\n    };\n\n    return this.createAutoplayPlugin(autoplayOptions);\n  }\n\n  /**\n   * Creates a class names plugin for the carousel\n   */\n  async createClassNamesPlugin(\n    options: {\n      selected?: string;\n      dragging?: string;\n      draggable?: string;\n    } = {},\n  ): Promise<EmblaPluginType> {\n    try {\n      const ClassNamesModule = await import('embla-carousel-class-names');\n      const ClassNames = ClassNamesModule.default;\n      return ClassNames(options);\n    } catch (err) {\n      console.error('Error loading ClassNames plugin:', err);\n      throw new Error('Make sure embla-carousel-class-names is installed.');\n    }\n  }\n\n  /**\n   * Creates a wheel gestures plugin for the carousel\n   */\n  async createWheelGesturesPlugin(\n    options: {\n      wheelDraggingClass?: string;\n      forceWheelAxis?: 'x' | 'y';\n      target?: Element;\n    } = {},\n  ) {\n    try {\n      const { WheelGesturesPlugin } = await import('embla-carousel-wheel-gestures');\n      return WheelGesturesPlugin(options);\n    } catch (err) {\n      console.error('Error loading WheelGestures plugin:', err);\n      throw new Error('Make sure embla-carousel-wheel-gestures is installed.');\n    }\n  }\n}\n"
    }
  ],
  "dependencies": [
    "embla-carousel-angular",
    "embla-carousel-autoplay",
    "embla-carousel-class-names",
    "embla-carousel-wheel-gestures"
  ],
  "registryDependencies": [
    "button",
    "icon"
  ]
}
