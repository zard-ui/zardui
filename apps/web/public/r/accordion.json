{
  "name": "accordion",
  "type": "registry:component",
  "files": [
    {
      "name": "accordion.component.ts",
      "content": "import {\n  type AfterContentInit,\n  ChangeDetectionStrategy,\n  Component,\n  computed,\n  contentChildren,\n  input,\n  ViewEncapsulation,\n} from '@angular/core';\n\nimport type { ClassValue } from 'clsx';\n\nimport { ZardAccordionItemComponent } from './accordion-item.component';\nimport { accordionVariants } from './accordion.variants';\nimport { mergeClasses } from '../../shared/utils/utils';\n\n@Component({\n  selector: 'z-accordion',\n  template: `\n    <ng-content />\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n  host: {\n    '[class]': 'classes()',\n  },\n  exportAs: 'zAccordion',\n})\nexport class ZardAccordionComponent implements AfterContentInit {\n  readonly items = contentChildren(ZardAccordionItemComponent);\n\n  readonly class = input<ClassValue>('');\n  readonly zType = input<'single' | 'multiple'>('single');\n  readonly zCollapsible = input<boolean>(true);\n  readonly zDefaultValue = input<string | string[]>('');\n\n  private readonly defaultValue = computed(() => {\n    const defaultValue = this.zDefaultValue();\n    if (typeof defaultValue === 'string') {\n      return defaultValue ? [defaultValue] : [];\n    } else if (this.zType() === 'single') {\n      throw new Error('Array of default values is supported only for multiple zType');\n    }\n    return defaultValue;\n  });\n\n  protected readonly classes = computed(() => mergeClasses(accordionVariants(), this.class()));\n\n  ngAfterContentInit(): void {\n    for (const item of this.items()) {\n      item.accordion = this;\n      item.isOpen.set(this.defaultValue().includes(item.zValue()));\n    }\n  }\n\n  toggleItem(selectedItem: ZardAccordionItemComponent): void {\n    if (this.zType() === 'single') {\n      this.toggleForSingleType(selectedItem);\n    } else {\n      this.toggleForMultipleType(selectedItem);\n    }\n  }\n\n  private toggleForSingleType(selectedItem: ZardAccordionItemComponent): void {\n    const isClosing = selectedItem.isOpen();\n\n    if (isClosing && !this.zCollapsible()) {\n      return;\n    }\n\n    for (const item of this.items()) {\n      const shouldBeOpen = item === selectedItem ? !item.isOpen() : false;\n      item.isOpen.set(shouldBeOpen);\n    }\n  }\n\n  private toggleForMultipleType(selectedItem: ZardAccordionItemComponent): void {\n    const isClosing = selectedItem.isOpen();\n    if (isClosing && !this.zCollapsible() && this.countOpenItems() <= 1) {\n      return;\n    }\n\n    selectedItem.isOpen.update(v => !v);\n  }\n\n  private countOpenItems(): number {\n    return this.items().reduce((counter, item) => (item.isOpen() ? ++counter : counter), 0);\n  }\n}\n"
    },
    {
      "name": "accordion-item.component.ts",
      "content": "import { ChangeDetectionStrategy, Component, computed, input, signal, ViewEncapsulation } from '@angular/core';\n\nimport type { ClassValue } from 'clsx';\n\nimport { ZardAccordionComponent } from './accordion.component';\nimport { accordionContentVariants, accordionItemVariants, accordionTriggerVariants } from './accordion.variants';\nimport { mergeClasses } from '../../shared/utils/utils';\nimport { ZardIconComponent } from '../icon/icon.component';\n\n@Component({\n  selector: 'z-accordion-item',\n  imports: [ZardIconComponent],\n  template: `\n    <button\n      type=\"button\"\n      [attr.aria-controls]=\"'content-' + zValue()\"\n      [attr.aria-expanded]=\"isOpen()\"\n      [id]=\"'accordion-' + zValue()\"\n      [class]=\"triggerClasses()\"\n      (click)=\"toggle()\"\n    >\n      {{ zTitle() }}\n      <z-icon\n        zType=\"chevron-down\"\n        class=\"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200\"\n        [class]=\"isOpen() ? 'rotate-180' : ''\"\n      />\n    </button>\n\n    <div\n      role=\"region\"\n      [attr.aria-labelledby]=\"'accordion-' + zValue()\"\n      [attr.data-state]=\"isOpen() ? 'open' : 'closed'\"\n      [id]=\"'content-' + zValue()\"\n      [class]=\"contentClasses()\"\n    >\n      <div class=\"overflow-hidden\">\n        <div class=\"pt-0 pb-4\">\n          <ng-content />\n        </div>\n      </div>\n    </div>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n  host: {\n    '[class]': 'itemClasses()',\n    '[attr.data-state]': \"isOpen() ? 'open' : 'closed'\",\n  },\n  exportAs: 'zAccordionItem',\n})\nexport class ZardAccordionItemComponent {\n  readonly zTitle = input<string>('');\n  readonly zValue = input<string>('');\n  readonly class = input<ClassValue>('');\n\n  accordion!: ZardAccordionComponent;\n  readonly isOpen = signal(false);\n\n  protected readonly itemClasses = computed(() => mergeClasses(accordionItemVariants(), this.class()));\n  protected readonly triggerClasses = computed(() => mergeClasses(accordionTriggerVariants()));\n  protected readonly contentClasses = computed(() => mergeClasses(accordionContentVariants({ isOpen: this.isOpen() })));\n\n  toggle(): void {\n    if (this.accordion) {\n      this.accordion.toggleItem(this);\n    } else {\n      this.isOpen.update(v => !v);\n    }\n  }\n}\n"
    },
    {
      "name": "accordion.variants.ts",
      "content": "import { cva, type VariantProps } from 'class-variance-authority';\n\nexport const accordionVariants = cva('grid w-full', {\n  variants: {},\n  defaultVariants: {},\n});\n\nexport const accordionItemVariants = cva('border-b border-border flex flex-1 flex-col', {\n  variants: {},\n  defaultVariants: {},\n});\n\nexport const accordionTriggerVariants = cva(\n  'cursor-pointer group flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 w-full',\n  {\n    variants: {},\n    defaultVariants: {},\n  },\n);\n\nexport const accordionContentVariants = cva('grid text-sm transition-all', {\n  variants: {\n    isOpen: {\n      true: 'grid-rows-[1fr]',\n      false: 'grid-rows-[0fr]',\n    },\n  },\n  defaultVariants: {\n    isOpen: false,\n  },\n});\n\nexport type ZardAccordionVariants = VariantProps<typeof accordionVariants>;\nexport type ZardAccordionItemVariants = VariantProps<typeof accordionItemVariants>;\nexport type ZardAccordionTriggerVariants = VariantProps<typeof accordionTriggerVariants>;\nexport type ZardAccordionContentVariants = VariantProps<typeof accordionContentVariants>;\n"
    }
  ],
  "registryDependencies": [
    "core",
    "icon"
  ]
}
