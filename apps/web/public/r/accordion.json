{
  "name": "accordion",
  "type": "registry:component",
  "files": [
    {
      "name": "accordion.component.ts",
      "content": "import {\n  type AfterContentInit,\n  ChangeDetectionStrategy,\n  Component,\n  computed,\n  contentChildren,\n  input,\n  ViewEncapsulation,\n} from '@angular/core';\n\nimport type { ClassValue } from 'clsx';\n\nimport { ZardAccordionItemComponent } from '@/shared/components/accordion/accordion-item.component';\nimport { accordionVariants } from '@/shared/components/accordion/accordion.variants';\nimport { mergeClasses } from '@/shared/utils/merge-classes';\n\n@Component({\n  selector: 'z-accordion',\n  template: `\n    <ng-content />\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n  host: {\n    '[class]': 'classes()',\n  },\n  exportAs: 'zAccordion',\n})\nexport class ZardAccordionComponent implements AfterContentInit {\n  readonly items = contentChildren(ZardAccordionItemComponent);\n\n  readonly class = input<ClassValue>('');\n  readonly zType = input<'single' | 'multiple'>('single');\n  readonly zCollapsible = input<boolean>(true);\n  readonly zDefaultValue = input<string | string[]>('');\n\n  private readonly defaultValue = computed(() => {\n    const defaultValue = this.zDefaultValue();\n    if (typeof defaultValue === 'string') {\n      return defaultValue ? [defaultValue] : [];\n    } else if (this.zType() === 'single') {\n      throw new Error('Array of default values is supported only for multiple zType');\n    }\n    return defaultValue;\n  });\n\n  protected readonly classes = computed(() => mergeClasses(accordionVariants(), this.class()));\n\n  ngAfterContentInit(): void {\n    for (const item of this.items()) {\n      item.accordion = this;\n      item.isOpen.set(this.defaultValue().includes(item.zValue()));\n    }\n  }\n\n  toggleItem(selectedItem: ZardAccordionItemComponent): void {\n    if (this.zType() === 'single') {\n      this.toggleForSingleType(selectedItem);\n    } else {\n      this.toggleForMultipleType(selectedItem);\n    }\n  }\n\n  private toggleForSingleType(selectedItem: ZardAccordionItemComponent): void {\n    const isClosing = selectedItem.isOpen();\n\n    if (isClosing && !this.zCollapsible()) {\n      return;\n    }\n\n    for (const item of this.items()) {\n      const shouldBeOpen = item === selectedItem ? !item.isOpen() : false;\n      item.isOpen.set(shouldBeOpen);\n    }\n  }\n\n  private toggleForMultipleType(selectedItem: ZardAccordionItemComponent): void {\n    const isClosing = selectedItem.isOpen();\n    if (isClosing && !this.zCollapsible() && this.countOpenItems() <= 1) {\n      return;\n    }\n\n    selectedItem.isOpen.update(v => !v);\n  }\n\n  private countOpenItems(): number {\n    return this.items().reduce((counter, item) => (item.isOpen() ? ++counter : counter), 0);\n  }\n}\n"
    },
    {
      "name": "accordion-item.component.ts",
      "content": "import { ChangeDetectionStrategy, Component, computed, input, signal, ViewEncapsulation } from '@angular/core';\n\nimport type { ClassValue } from 'clsx';\n\nimport type { ZardAccordionComponent } from '@/shared/components/accordion/accordion.component';\nimport {\n  accordionContentVariants,\n  accordionItemVariants,\n  accordionTriggerVariants,\n} from '@/shared/components/accordion/accordion.variants';\nimport { ZardIconComponent } from '@/shared/components/icon';\nimport { mergeClasses } from '@/shared/utils/merge-classes';\n\n@Component({\n  selector: 'z-accordion-item',\n  imports: [ZardIconComponent],\n  template: `\n    <button\n      type=\"button\"\n      [attr.aria-controls]=\"'content-' + zValue()\"\n      [attr.aria-expanded]=\"isOpen()\"\n      [id]=\"'accordion-' + zValue()\"\n      [class]=\"triggerClasses()\"\n      (click)=\"toggle()\"\n    >\n      {{ zTitle() }}\n      <z-icon\n        zType=\"chevron-down\"\n        class=\"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200\"\n        [class]=\"isOpen() ? 'rotate-180' : ''\"\n      />\n    </button>\n\n    <div\n      role=\"region\"\n      [attr.aria-labelledby]=\"'accordion-' + zValue()\"\n      [attr.data-state]=\"isOpen() ? 'open' : 'closed'\"\n      [id]=\"'content-' + zValue()\"\n      [class]=\"contentClasses()\"\n    >\n      <div class=\"overflow-hidden\">\n        <div class=\"pt-0 pb-4\">\n          <ng-content />\n        </div>\n      </div>\n    </div>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n  host: {\n    '[class]': 'itemClasses()',\n    '[attr.data-state]': \"isOpen() ? 'open' : 'closed'\",\n  },\n  exportAs: 'zAccordionItem',\n})\nexport class ZardAccordionItemComponent {\n  readonly zTitle = input<string>('');\n  readonly zValue = input<string>('');\n  readonly class = input<ClassValue>('');\n\n  accordion!: ZardAccordionComponent;\n  readonly isOpen = signal(false);\n\n  protected readonly itemClasses = computed(() => mergeClasses(accordionItemVariants(), this.class()));\n  protected readonly triggerClasses = computed(() => mergeClasses(accordionTriggerVariants()));\n  protected readonly contentClasses = computed(() => mergeClasses(accordionContentVariants({ isOpen: this.isOpen() })));\n\n  toggle(): void {\n    if (this.accordion) {\n      this.accordion.toggleItem(this);\n    } else {\n      this.isOpen.update(v => !v);\n    }\n  }\n}\n"
    },
    {
      "name": "accordion.variants.ts",
      "content": "import { cva, type VariantProps } from 'class-variance-authority';\n\nexport const accordionVariants = cva('grid w-full', {\n  variants: {},\n  defaultVariants: {},\n});\n\nexport const accordionItemVariants = cva('border-b border-border flex flex-1 flex-col', {\n  variants: {},\n  defaultVariants: {},\n});\n\nexport const accordionTriggerVariants = cva(\n  'cursor-pointer group flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 w-full',\n  {\n    variants: {},\n    defaultVariants: {},\n  },\n);\n\nexport const accordionContentVariants = cva('grid text-sm transition-all', {\n  variants: {\n    isOpen: {\n      true: 'grid-rows-[1fr]',\n      false: 'grid-rows-[0fr]',\n    },\n  },\n  defaultVariants: {\n    isOpen: false,\n  },\n});\n\nexport type ZardAccordionVariants = VariantProps<typeof accordionVariants>;\nexport type ZardAccordionItemVariants = VariantProps<typeof accordionItemVariants>;\nexport type ZardAccordionTriggerVariants = VariantProps<typeof accordionTriggerVariants>;\nexport type ZardAccordionContentVariants = VariantProps<typeof accordionContentVariants>;\n"
    },
    {
      "name": "accordion.imports.ts",
      "content": "import { ZardAccordionItemComponent } from '@/shared/components/accordion/accordion-item.component';\nimport { ZardAccordionComponent } from '@/shared/components/accordion/accordion.component';\n\nexport const ZardAccordionImports = [ZardAccordionComponent, ZardAccordionItemComponent] as const;\n"
    },
    {
      "name": "index.ts",
      "content": "export * from '@/shared/components/accordion/accordion.component';\nexport * from '@/shared/components/accordion/accordion-item.component';\nexport * from '@/shared/components/accordion/accordion.variants';\nexport * from '@/shared/components/accordion/accordion.imports';\n"
    }
  ],
  "registryDependencies": [
    "icon"
  ],
  "docs": {
    "overview": "# Accordion\n\nA vertically stacked set of interactive headings that each reveal a section of content.\n",
    "api": "# API Reference\n\n[z-accordion] Component\n\nz-accordion is a component that displays a list of collapsible content sections.\n\n| Property          | Description                                                      | Type                     | Default    |\n| ----------------- | ---------------------------------------------------------------- | ------------------------ | ---------- |\n| `[class]`         | Custom CSS classes                                               | `string`                 | `''`       |\n| `[zType]`         | Single or multiple items can be opened                           | `'single' \\| 'multiple'` | `'single'` |\n| `[zCollapsible]`  | Whether accordion items can be collapsed                         | `boolean`                | `true`     |\n| `[zDefaultValue]` | Item value(s) of the accordion's item(s) to be opened by default | `string \\| string[]`     | `''`       |\n\n[z-accordion-item] Component\n\nz-accordion-item represents a single section in the accordion.\n\n| Property   | Description                        | Type     | Default |\n| ---------- | ---------------------------------- | -------- | ------- |\n| `[class]`  | Custom CSS classes                 | `string` | `''`    |\n| `[zTitle]` | The title for item header          | `string` | `''`    |\n| `[zValue]` | Unique value of the accordion item | `string` | `''`    |\n"
  },
  "demos": [
    {
      "name": "basic.ts",
      "content": "import { ChangeDetectionStrategy, Component } from '@angular/core';\n\nimport { ZardAccordionImports } from '@/shared/components/accordion/accordion.imports';\n\n@Component({\n  selector: 'z-demo-accordion-basic',\n  imports: [ZardAccordionImports],\n  template: `\n    <z-accordion zDefaultValue=\"item-2\">\n      <z-accordion-item zValue=\"item-1\" zTitle=\"A Study in Scarlet\">\n        The first case of Sherlock Holmes and Dr. Watson. They investigate a murder in London, which leads to a\n        backstory involving Mormons in the U.S. Introduces Holmes’s deductive method.\n      </z-accordion-item>\n\n      <z-accordion-item zValue=\"item-2\" zTitle=\"The Sign of Four\" zDescription=\"Sir Arthur Conan Doyle\">\n        The first case of Sherlock Holmes and Dr. Watson. They investigate a murder in London, which leads to a\n        backstory involving Mormons in the U.S. Introduces Holmes’s deductive method.\n      </z-accordion-item>\n\n      <z-accordion-item zValue=\"item-3\" zTitle=\"The Hound of the Baskervilles\">\n        Holmes and Watson investigate the legend of a demonic hound haunting the Baskerville family. Set in the eerie\n        Dartmoor moorlands, the story involves betrayal and greed.\n      </z-accordion-item>\n    </z-accordion>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ZardDemoAccordionBasicComponent {}\n"
    },
    {
      "name": "multiple-last-not-collapsible.ts",
      "content": "import { ChangeDetectionStrategy, Component } from '@angular/core';\n\nimport { ZardAccordionImports } from '@/shared/components/accordion/accordion.imports';\n\n@Component({\n  selector: 'z-demo-accordion-multiple-last-not-collapsible',\n  imports: [ZardAccordionImports],\n  template: `\n    <z-accordion zType=\"multiple\" [zDefaultValue]=\"defaults\" [zCollapsible]=\"false\">\n      <z-accordion-item zValue=\"item-1\" zTitle=\"A Study in Scarlet\">\n        The first case of Sherlock Holmes and Dr. Watson. They investigate a murder in London, which leads to a\n        backstory involving Mormons in the U.S. Introduces Holmes’s deductive method.\n      </z-accordion-item>\n\n      <z-accordion-item zValue=\"item-2\" zTitle=\"The Sign of Four\">\n        The first case of Sherlock Holmes and Dr. Watson. They investigate a murder in London, which leads to a\n        backstory involving Mormons in the U.S. Introduces Holmes’s deductive method.\n      </z-accordion-item>\n\n      <z-accordion-item zValue=\"item-3\" zTitle=\"The Hound of the Baskervilles\">\n        Holmes and Watson investigate the legend of a demonic hound haunting the Baskerville family. Set in the eerie\n        Dartmoor moorlands, the story involves betrayal and greed.\n      </z-accordion-item>\n    </z-accordion>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ZardDemoAccordionMultipleLastNotCollapsibleComponent {\n  readonly defaults: string[] = ['item-1', 'item-3'];\n}\n"
    },
    {
      "name": "multiple.ts",
      "content": "import { ChangeDetectionStrategy, Component } from '@angular/core';\n\nimport { ZardAccordionImports } from '@/shared/components/accordion/accordion.imports';\n\n@Component({\n  selector: 'z-demo-accordion-multiple',\n  imports: [ZardAccordionImports],\n  template: `\n    <z-accordion zType=\"multiple\">\n      <z-accordion-item zValue=\"item-1\" zTitle=\"A Study in Scarlet\">\n        The first case of Sherlock Holmes and Dr. Watson. They investigate a murder in London, which leads to a\n        backstory involving Mormons in the U.S. Introduces Holmes’s deductive method.\n      </z-accordion-item>\n\n      <z-accordion-item zValue=\"item-2\" zTitle=\"The Sign of Four\" zDescription=\"Sir Arthur Conan Doyle\">\n        The first case of Sherlock Holmes and Dr. Watson. They investigate a murder in London, which leads to a\n        backstory involving Mormons in the U.S. Introduces Holmes’s deductive method.\n      </z-accordion-item>\n\n      <z-accordion-item zValue=\"item-3\" zTitle=\"The Hound of the Baskervilles\">\n        Holmes and Watson investigate the legend of a demonic hound haunting the Baskerville family. Set in the eerie\n        Dartmoor moorlands, the story involves betrayal and greed.\n      </z-accordion-item>\n    </z-accordion>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ZardDemoAccordionMultipleComponent {}\n"
    }
  ]
}
