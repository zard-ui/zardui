{
  "name": "date-picker",
  "type": "registry:component",
  "files": [
    {
      "name": "date-picker.component.ts",
      "content": "import { DatePipe } from '@angular/common';\nimport {\n  ChangeDetectionStrategy,\n  Component,\n  computed,\n  forwardRef,\n  inject,\n  input,\n  model,\n  output,\n  viewChild,\n  ViewEncapsulation,\n  type TemplateRef,\n} from '@angular/core';\nimport { NG_VALUE_ACCESSOR, type ControlValueAccessor } from '@angular/forms';\n\nimport type { ClassValue } from 'clsx';\n\nimport { ZardButtonComponent, type ZardButtonTypeVariants } from '@/shared/components/button';\nimport { ZardCalendarComponent } from '@/shared/components/calendar';\nimport type { ZardDatePickerSizeVariants } from '@/shared/components/date-picker/date-picker.variants';\nimport { ZardIconComponent } from '@/shared/components/icon';\nimport { ZardPopoverComponent, ZardPopoverDirective } from '@/shared/components/popover';\nimport { mergeClasses, noopFn } from '@/shared/utils/merge-classes';\n\n/**\n * Height overrides for date-picker sizes.\n *\n * These heights intentionally differ from button size variants to accommodate\n * the date-picker UI:\n * - default: h-9 (vs button h-8)\n * - lg: h-11 (vs button h-9)\n *\n * The `mergeClasses` utility (tailwind-merge) resolves class conflicts,\n * allowing these values to override the base button heights defined in\n * `ZardDatePickerSizeVariants`.\n */\nconst HEIGHT_BY_SIZE: Record<ZardDatePickerSizeVariants, string> = {\n  xs: 'h-7',\n  sm: 'h-8',\n  default: 'h-9',\n  lg: 'h-11',\n};\n\n@Component({\n  selector: 'z-date-picker, [z-date-picker]',\n  imports: [ZardButtonComponent, ZardCalendarComponent, ZardPopoverComponent, ZardPopoverDirective, ZardIconComponent],\n  template: `\n    <button\n      z-button\n      type=\"button\"\n      [zType]=\"zType()\"\n      [zSize]=\"zSize()\"\n      [disabled]=\"disabled()\"\n      [class]=\"buttonClasses()\"\n      zPopover\n      #popoverDirective=\"zPopover\"\n      [zContent]=\"calendarTemplate\"\n      zTrigger=\"click\"\n      (zVisibleChange)=\"onPopoverVisibilityChange($event)\"\n      [attr.aria-expanded]=\"false\"\n      [attr.aria-haspopup]=\"true\"\n      aria-label=\"Choose date\"\n    >\n      <z-icon zType=\"calendar\" />\n      <span [class]=\"textClasses()\">\n        {{ displayText() }}\n      </span>\n    </button>\n\n    <ng-template #calendarTemplate>\n      <z-popover [class]=\"popoverClasses()\">\n        <z-calendar\n          #calendar\n          class=\"border-0\"\n          [value]=\"value()\"\n          [minDate]=\"minDate()\"\n          [maxDate]=\"maxDate()\"\n          [disabled]=\"disabled()\"\n          (dateChange)=\"onDateChange($event)\"\n        />\n      </z-popover>\n    </ng-template>\n  `,\n  providers: [\n    DatePipe,\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => ZardDatePickerComponent),\n      multi: true,\n    },\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n  host: {\n    '[class]': 'class()',\n  },\n  exportAs: 'zDatePicker',\n})\nexport class ZardDatePickerComponent implements ControlValueAccessor {\n  private readonly datePipe = inject(DatePipe);\n\n  readonly calendarTemplate = viewChild.required<TemplateRef<unknown>>('calendarTemplate');\n  readonly popoverDirective = viewChild.required<ZardPopoverDirective>('popoverDirective');\n  readonly calendar = viewChild.required<ZardCalendarComponent>('calendar');\n\n  readonly class = input<ClassValue>('');\n  readonly zType = input<ZardButtonTypeVariants>('outline');\n  readonly zSize = input<ZardDatePickerSizeVariants>('default');\n  readonly value = model<Date | null>(null);\n  readonly placeholder = input<string>('Pick a date');\n  readonly zFormat = input<string>('MMMM d, yyyy');\n  readonly minDate = input<Date | null>(null);\n  readonly maxDate = input<Date | null>(null);\n  readonly disabled = model<boolean>(false);\n\n  readonly dateChange = output<Date | null>();\n\n  private onChange: (value: Date | null) => void = noopFn;\n  private onTouched: () => void = noopFn;\n\n  protected readonly buttonClasses = computed(() => {\n    const hasValue = !!this.value();\n    const size = this.zSize();\n    const height = HEIGHT_BY_SIZE[size];\n    return mergeClasses(\n      'justify-start text-left font-normal',\n      !hasValue && 'text-muted-foreground',\n      height,\n      'min-w-[240px]',\n    );\n  });\n\n  protected readonly textClasses = computed(() => {\n    const hasValue = !!this.value();\n    return mergeClasses(!hasValue && 'text-muted-foreground');\n  });\n\n  protected readonly popoverClasses = computed(() => mergeClasses('w-auto p-0'));\n\n  protected readonly displayText = computed(() => {\n    const date = this.value();\n    if (!date) {\n      return this.placeholder();\n    }\n    return this.formatDate(date, this.zFormat());\n  });\n\n  protected onDateChange(date: Date | Date[]): void {\n    // Date picker always uses single mode, so we can safely cast\n    const singleDate = Array.isArray(date) ? (date[0] ?? null) : date;\n    this.value.set(singleDate);\n    this.onChange(singleDate);\n    this.onTouched();\n    this.dateChange.emit(singleDate);\n\n    this.popoverDirective().hide();\n  }\n\n  protected onPopoverVisibilityChange(visible: boolean): void {\n    if (visible) {\n      setTimeout(() => {\n        if (this.calendar()) {\n          this.calendar().resetNavigation();\n        }\n      });\n    }\n  }\n\n  private formatDate(date: Date, format: string): string {\n    return this.datePipe.transform(date, format) ?? '';\n  }\n\n  writeValue(value: Date | null): void {\n    this.value.set(value);\n  }\n\n  registerOnChange(fn: (value: Date | null) => void): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: () => void): void {\n    this.onTouched = fn;\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled.set(isDisabled);\n  }\n}\n"
    },
    {
      "name": "date-picker.variants.ts",
      "content": "import { cva, type VariantProps } from 'class-variance-authority';\n\nexport const datePickerVariants = cva('', {\n  variants: {\n    zSize: {\n      xs: '',\n      sm: '',\n      default: '',\n      lg: '',\n    },\n    zType: {\n      default: '',\n      outline: '',\n      ghost: '',\n    },\n  },\n  defaultVariants: {\n    zSize: 'default',\n    zType: 'outline',\n  },\n});\n\nexport type ZardDatePickerSizeVariants = NonNullable<VariantProps<typeof datePickerVariants>['zSize']>;\n"
    },
    {
      "name": "index.ts",
      "content": "export * from './date-picker.component';\nexport * from './date-picker.variants';\n"
    }
  ],
  "registryDependencies": [
    "button",
    "calendar",
    "popover",
    "input",
    "icon"
  ],
  "docs": {
    "overview": "# Date Picker\n\nA date picker component that combines a button trigger with a calendar popup for intuitive date selection.\n",
    "api": "# Date Picker API\n\n### ZardDatePickerComponent\n\nA date picker component that provides an intuitive interface for date selection through a button trigger and calendar popup.\n\n#### Properties\n\n| Property      | Type                                | Default         | Description                               |\n| ------------- | ----------------------------------- | --------------- | ----------------------------------------- |\n| `class`       | `ClassValue`                        | `''`            | Additional CSS classes                    |\n| `zType`       | `'default' \\| 'outline' \\| 'ghost'` | `'outline'`     | Button variant style                      |\n| `zSize`       | `'sm' \\| 'default' \\| 'lg'`         | `'default'`     | Size of the date picker                   |\n| `value`       | `Date \\| null`                      | `null`          | Selected date value                       |\n| `placeholder` | `string`                            | `'Pick a date'` | Placeholder text when no date is selected |\n| `zFormat`     | `string`                            | `'MMMM d, yyyy'` | Date format pattern                      |\n| `minDate`     | `Date \\| null`                      | `null`          | Minimum selectable date                   |\n| `maxDate`     | `Date \\| null`                      | `null`          | Maximum selectable date                   |\n| `disabled`    | `boolean`                           | `false`         | Whether the date picker is disabled       |\n\n#### Format Patterns\n\nThe `zFormat` property supports the following patterns:\n\n| Pattern | Description       | Example     |\n|---------|-------------------|-------------|\n| `yyyy`  | 4-digit year      | 2024        |\n| `yy`    | 2-digit year      | 24          |\n| `MMMM`  | Full month name   | January     |\n| `MMM`   | Short month name  | Jan         |\n| `MM`    | Month (2 digits)  | 01          |\n| `M`     | Month (1-2 digits)| 1           |\n| `dd`    | Day (2 digits)    | 05          |\n| `d`     | Day (1-2 digits)  | 5           |\n| `EEEE`  | Full day name     | Sunday      |\n| `EEE`   | Short day name    | Sun         |\n\nCommon format examples:\n- `'MMMM d, yyyy'` → \"January 5, 2024\" (default)\n- `'MM/dd/yyyy'` → \"01/05/2024\"\n- `'dd-MM-yy'` → \"05-01-24\"\n- `'EEE, MMM d'` → \"Sun, Jan 5\"\n\n#### Events\n\n| Event        | Type                         | Description                     |\n| ------------ | ---------------------------- | ------------------------------- |\n| `dateChange` | `EventEmitter<Date \\| null>` | Emitted when a date is selected |\n"
  },
  "demos": [
    {
      "name": "default.ts",
      "content": "import { ChangeDetectionStrategy, Component, signal } from '@angular/core';\n\nimport { ZardDatePickerComponent } from '../date-picker.component';\n\n@Component({\n  selector: 'zard-demo-date-picker-default',\n  imports: [ZardDatePickerComponent],\n  standalone: true,\n  template: `\n    <z-date-picker [value]=\"selectedDate()\" placeholder=\"Pick a date\" (dateChange)=\"onDateChange($event)\" />\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ZardDemoDatePickerDefaultComponent {\n  readonly selectedDate = signal<Date | null>(null);\n\n  onDateChange(date: Date | null) {\n    this.selectedDate.set(date);\n    console.log('Selected date:', date);\n  }\n}\n"
    },
    {
      "name": "formats.ts",
      "content": "import { ChangeDetectionStrategy, Component } from '@angular/core';\n\nimport { ZardDatePickerComponent } from '../date-picker.component';\n\n@Component({\n  selector: 'z-date-picker-formats-demo',\n  imports: [ZardDatePickerComponent],\n  standalone: true,\n  template: `\n    <div class=\"flex flex-col gap-4\">\n      <div class=\"flex flex-col gap-2\">\n        <label class=\"text-sm font-medium\">Default Format (MMMM d, yyyy)</label>\n        <z-date-picker [value]=\"selectedDate\" (dateChange)=\"selectedDate = $event\" />\n      </div>\n\n      <div class=\"flex flex-col gap-2\">\n        <label class=\"text-sm font-medium\">US Format (MM/dd/yyyy)</label>\n        <z-date-picker [value]=\"selectedDate\" (dateChange)=\"selectedDate = $event\" zFormat=\"MM/dd/yyyy\" />\n      </div>\n\n      <div class=\"flex flex-col gap-2\">\n        <label class=\"text-sm font-medium\">European Format (dd-MM-yyyy)</label>\n        <z-date-picker [value]=\"selectedDate\" (dateChange)=\"selectedDate = $event\" zFormat=\"dd-MM-yyyy\" />\n      </div>\n\n      <div class=\"flex flex-col gap-2\">\n        <label class=\"text-sm font-medium\">Short Format (MMM d, yy)</label>\n        <z-date-picker [value]=\"selectedDate\" (dateChange)=\"selectedDate = $event\" zFormat=\"MMM d, yy\" />\n      </div>\n\n      <div class=\"flex flex-col gap-2\">\n        <label class=\"text-sm font-medium\">With Day Name (EEE, MMMM d)</label>\n        <z-date-picker [value]=\"selectedDate\" (dateChange)=\"selectedDate = $event\" zFormat=\"EEE, MMMM d\" />\n      </div>\n\n      <div class=\"flex flex-col gap-2\">\n        <label class=\"text-sm font-medium\">ISO Format (yyyy-MM-dd)</label>\n        <z-date-picker [value]=\"selectedDate\" (dateChange)=\"selectedDate = $event\" zFormat=\"yyyy-MM-dd\" />\n      </div>\n    </div>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ZardDatePickerFormatsComponent {\n  selectedDate: Date | null = new Date();\n}\n\nexport default ZardDatePickerFormatsComponent;\n"
    },
    {
      "name": "sizes.ts",
      "content": "import { ChangeDetectionStrategy, Component, signal } from '@angular/core';\n\nimport { ZardDatePickerComponent } from '../date-picker.component';\n\n@Component({\n  selector: 'zard-demo-date-picker-sizes',\n  imports: [ZardDatePickerComponent],\n  standalone: true,\n  template: `\n    <div class=\"flex flex-col gap-4\">\n      <div class=\"space-y-2\">\n        <h4 class=\"text-sm font-medium\">Small</h4>\n        <z-date-picker\n          zSize=\"sm\"\n          [value]=\"selectedDateSm()\"\n          placeholder=\"Pick a date\"\n          (dateChange)=\"onDateChangeSm($event)\"\n        />\n      </div>\n\n      <div class=\"space-y-2\">\n        <h4 class=\"text-sm font-medium\">Default</h4>\n        <z-date-picker\n          zSize=\"default\"\n          [value]=\"selectedDateDefault()\"\n          placeholder=\"Pick a date\"\n          (dateChange)=\"onDateChangeDefault($event)\"\n        />\n      </div>\n\n      <div class=\"space-y-2\">\n        <h4 class=\"text-sm font-medium\">Large</h4>\n        <z-date-picker\n          zSize=\"lg\"\n          [value]=\"selectedDateLg()\"\n          placeholder=\"Pick a date\"\n          (dateChange)=\"onDateChangeLg($event)\"\n        />\n      </div>\n    </div>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ZardDemoDatePickerSizesComponent {\n  readonly selectedDateSm = signal<Date | null>(null);\n  readonly selectedDateDefault = signal<Date | null>(null);\n  readonly selectedDateLg = signal<Date | null>(null);\n\n  onDateChangeSm(date: Date | null) {\n    this.selectedDateSm.set(date);\n    console.log('Selected date (sm):', date);\n  }\n\n  onDateChangeDefault(date: Date | null) {\n    this.selectedDateDefault.set(date);\n    console.log('Selected date (default):', date);\n  }\n\n  onDateChangeLg(date: Date | null) {\n    this.selectedDateLg.set(date);\n    console.log('Selected date (lg):', date);\n  }\n}\n"
    }
  ]
}
