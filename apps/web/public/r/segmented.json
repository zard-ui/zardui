{
  "name": "segmented",
  "type": "registry:component",
  "files": [
    {
      "name": "segmented.component.ts",
      "content": "import {\n  ChangeDetectionStrategy,\n  Component,\n  computed,\n  contentChildren,\n  effect,\n  forwardRef,\n  input,\n  type OnInit,\n  output,\n  signal,\n  ViewEncapsulation,\n} from '@angular/core';\nimport { type ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\n\nimport type { ClassValue } from 'clsx';\n\nimport { segmentedItemVariants, segmentedVariants, type ZardSegmentedVariants } from './segmented.variants';\nimport { mergeClasses } from '../../shared/utils/utils';\n\nexport interface SegmentedOption {\n  value: string;\n  label: string;\n  disabled?: boolean;\n}\n@Component({\n  selector: 'z-segmented-item',\n  standalone: true,\n  template: `<ng-content />`,\n  encapsulation: ViewEncapsulation.None,\n})\nexport class ZardSegmentedItemComponent {\n  readonly value = input.required<string>();\n  readonly label = input.required<string>();\n  readonly disabled = input(false);\n}\n\n@Component({\n  selector: 'z-segmented',\n  standalone: true,\n  template: `\n    <div [class]=\"classes()\" role=\"tablist\" [attr.aria-label]=\"zAriaLabel()\">\n      @for (option of zOptions(); track option.value) {\n        <button\n          type=\"button\"\n          role=\"tab\"\n          [class]=\"getItemClasses(option.value)\"\n          [disabled]=\"option.disabled || zDisabled()\"\n          [attr.aria-selected]=\"isSelected(option.value)\"\n          [attr.aria-controls]=\"option.value + '-panel'\"\n          [attr.id]=\"option.value + '-tab'\"\n          (click)=\"selectOption(option.value)\"\n        >\n          {{ option.label }}\n        </button>\n      } @empty {\n        @for (item of items(); track item.value()) {\n          <button\n            type=\"button\"\n            role=\"tab\"\n            [class]=\"getItemClasses(item.value())\"\n            [disabled]=\"item.disabled() || zDisabled()\"\n            [attr.aria-selected]=\"isSelected(item.value())\"\n            [attr.aria-controls]=\"item.value() + '-panel'\"\n            [attr.id]=\"item.value() + '-tab'\"\n            (click)=\"selectOption(item.value())\"\n          >\n            {{ item.label() }}\n          </button>\n        }\n      }\n    </div>\n  `,\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => ZardSegmentedComponent),\n      multi: true,\n    },\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n  host: {\n    '[class]': 'wrapperClasses()',\n  },\n  exportAs: 'zSegmented',\n})\nexport class ZardSegmentedComponent implements ControlValueAccessor, OnInit {\n  private readonly itemComponents = contentChildren(ZardSegmentedItemComponent);\n\n  readonly class = input<ClassValue>('');\n  readonly zSize = input<ZardSegmentedVariants['zSize']>('default');\n  readonly zOptions = input<SegmentedOption[]>([]);\n  readonly zDefaultValue = input<string>('');\n  readonly zDisabled = input(false);\n  readonly zAriaLabel = input<string>('Segmented control');\n\n  readonly zChange = output<string>();\n\n  protected readonly selectedValue = signal<string>('');\n  protected readonly items = signal<readonly ZardSegmentedItemComponent[]>([]);\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  private onChange: (value: string) => void = () => {};\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  private onTouched = () => {};\n\n  constructor() {\n    effect(() => {\n      this.items.set(this.itemComponents());\n    });\n  }\n\n  ngOnInit() {\n    // Initialize with default value\n    if (this.zDefaultValue()) {\n      this.selectedValue.set(this.zDefaultValue());\n    }\n  }\n\n  protected readonly classes = computed(() => mergeClasses(segmentedVariants({ zSize: this.zSize() }), this.class()));\n\n  protected readonly wrapperClasses = computed(() => 'inline-block');\n\n  protected getItemClasses(value: string): string {\n    return segmentedItemVariants({\n      zSize: this.zSize(),\n      isActive: this.isSelected(value),\n    });\n  }\n\n  protected isSelected(value: string): boolean {\n    return this.selectedValue() === value;\n  }\n\n  protected selectOption(value: string) {\n    if (this.zDisabled()) return;\n\n    const option = this.zOptions().find(opt => opt.value === value);\n    const item = this.items().find(item => item.value() === value);\n\n    if (option?.disabled || item?.disabled()) return;\n\n    this.selectedValue.set(value);\n    this.onChange(value);\n    this.onTouched();\n    this.zChange.emit(value);\n  }\n\n  // ControlValueAccessor implementation\n  writeValue(value: string): void {\n    this.selectedValue.set(value ?? '');\n  }\n\n  registerOnChange(fn: (value: string) => void): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: () => void): void {\n    this.onTouched = fn;\n  }\n\n  setDisabledState(_isDisabled: boolean): void {\n    // Handled by zDisabled input\n  }\n}\n"
    },
    {
      "name": "segmented.variants.ts",
      "content": "import { cva, type VariantProps } from 'class-variance-authority';\n\nexport const segmentedVariants = cva(\n  'inline-flex items-center justify-center rounded-md bg-muted p-1 text-muted-foreground',\n  {\n    variants: {\n      zSize: {\n        sm: 'h-9 text-xs',\n        default: 'h-10 text-sm',\n        lg: 'h-12 text-base',\n      },\n    },\n    defaultVariants: {\n      zSize: 'default',\n    },\n  },\n);\n\nexport const segmentedItemVariants = cva(\n  'inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50',\n  {\n    variants: {\n      zSize: {\n        sm: 'px-2 py-1 text-xs',\n        default: 'px-3 py-1.5 text-sm',\n        lg: 'px-4 py-2 text-base',\n      },\n      isActive: {\n        true: 'bg-background text-foreground shadow-sm',\n        false: 'hover:bg-muted/50',\n      },\n    },\n    defaultVariants: {\n      zSize: 'default',\n      isActive: false,\n    },\n  },\n);\n\nexport type ZardSegmentedVariants = VariantProps<typeof segmentedVariants>;\nexport type ZardSegmentedItemVariants = VariantProps<typeof segmentedItemVariants>;\n"
    }
  ],
  "registryDependencies": [
    "core"
  ]
}
