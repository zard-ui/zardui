{
  "name": "toggle-group",
  "type": "registry:component",
  "files": [
    {
      "name": "toggle-group.component.ts",
      "content": "import {\n  ChangeDetectionStrategy,\n  Component,\n  computed,\n  forwardRef,\n  input,\n  output,\n  signal,\n  ViewEncapsulation,\n} from '@angular/core';\nimport { type ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\n\nimport type { ClassValue } from 'clsx';\n\nimport { toggleGroupVariants, toggleGroupItemVariants } from './toggle-group.variants';\nimport { ZardIconComponent } from '../icon/icon.component';\nimport type { ZardIcon } from '../icon/icons';\n\nimport { mergeClasses } from '@/shared/utils/merge-classes';\n\nexport interface ZardToggleGroupItem {\n  value: string;\n  label?: string;\n  icon?: ZardIcon;\n  disabled?: boolean;\n  ariaLabel?: string;\n}\n\ntype OnTouchedType = () => void;\ntype OnChangeType = (value: string | string[]) => void;\n\n@Component({\n  selector: 'z-toggle-group',\n  imports: [ZardIconComponent],\n  standalone: true,\n  template: `\n    <div [class]=\"classes()\" role=\"group\" [attr.data-orientation]=\"'horizontal'\">\n      @for (item of items(); track item.value; let i = $index) {\n        <button\n          type=\"button\"\n          [attr.aria-pressed]=\"isItemPressed(item.value)\"\n          [attr.data-state]=\"isItemPressed(item.value) ? 'on' : 'off'\"\n          [attr.aria-label]=\"item.ariaLabel\"\n          [class]=\"getItemClasses(i, items().length)\"\n          [disabled]=\"disabled() || item.disabled\"\n          (click)=\"toggleItem(item)\"\n        >\n          @if (item.icon) {\n            <span z-icon [zType]=\"item.icon\" class=\"h-4 w-4 shrink-0\"></span>\n          }\n          @if (item.label) {\n            <span>{{ item.label }}</span>\n          } @else if (!item.icon) {\n            <span>{{ item.value }}</span>\n          }\n        </button>\n      }\n    </div>\n  `,\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => ZardToggleGroupComponent),\n      multi: true,\n    },\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n  exportAs: 'zToggleGroup',\n})\nexport class ZardToggleGroupComponent implements ControlValueAccessor {\n  readonly zMode = input<'single' | 'multiple'>('multiple');\n  readonly zType = input<'default' | 'outline'>('default');\n  readonly zSize = input<'sm' | 'md' | 'lg'>('md');\n  readonly value = input<string | string[]>();\n  readonly defaultValue = input<string | string[]>();\n  readonly disabled = input<boolean>(false);\n  readonly class = input<ClassValue>('');\n  readonly items = input<ZardToggleGroupItem[]>([]);\n\n  readonly valueChange = output<string | string[]>();\n\n  private readonly internalValue = signal<string | string[] | undefined>(undefined);\n\n  protected readonly classes = computed(() =>\n    mergeClasses(\n      toggleGroupVariants({\n        zType: this.zType(),\n        zSize: this.zSize(),\n      }),\n      this.class(),\n    ),\n  );\n\n  protected readonly currentValue = computed(() => {\n    const internal = this.internalValue();\n    const input = this.value();\n    const defaultVal = this.defaultValue();\n\n    if (internal !== undefined) return internal;\n    if (input !== undefined) return input;\n    if (defaultVal !== undefined) return defaultVal;\n\n    return this.zMode() === 'single' ? '' : [];\n  });\n\n  protected getItemClasses(index: number, total: number): string {\n    const baseClasses = toggleGroupItemVariants({\n      zType: this.zType(),\n      zSize: this.zSize(),\n    });\n\n    const positionClasses = [];\n\n    // Add rounded corners for first and last items\n    if (index === 0) {\n      positionClasses.push('first:rounded-l-md');\n    }\n    if (index === total - 1) {\n      positionClasses.push('last:rounded-r-md');\n    }\n\n    // Handle borders for outline variant\n    if (this.zType() === 'outline') {\n      if (index === 0) {\n        // First item gets full border\n        positionClasses.push('border-l');\n      } else {\n        // Other items don't get left border (connects to previous)\n        positionClasses.push('border-l-0');\n      }\n    }\n\n    // Focus z-index\n    positionClasses.push('focus:z-10', 'focus-visible:z-10');\n\n    return mergeClasses(baseClasses, ...positionClasses);\n  }\n\n  protected isItemPressed(itemValue: string): boolean {\n    const current = this.currentValue();\n    if (this.zMode() === 'single') {\n      return current === itemValue;\n    }\n    return Array.isArray(current) && current.includes(itemValue);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  private onTouched: OnTouchedType = () => {};\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  private onChangeFn: OnChangeType = () => {};\n\n  toggleItem(item: ZardToggleGroupItem) {\n    if (this.disabled() || item.disabled) return;\n\n    const currentValue = this.currentValue();\n    let newValue: string | string[];\n\n    if (this.zMode() === 'single') {\n      newValue = currentValue === item.value ? '' : item.value;\n    } else {\n      const currentArray = Array.isArray(currentValue) ? currentValue : [];\n      if (currentArray.includes(item.value)) {\n        newValue = currentArray.filter(v => v !== item.value);\n      } else {\n        newValue = [...currentArray, item.value];\n      }\n    }\n\n    this.internalValue.set(newValue);\n    this.valueChange.emit(newValue);\n    this.onChangeFn(newValue);\n    this.onTouched();\n  }\n\n  writeValue(value: string | string[]): void {\n    if (value !== undefined) {\n      this.internalValue.set(value);\n    }\n  }\n\n  registerOnChange(fn: OnChangeType): void {\n    this.onChangeFn = fn;\n  }\n\n  registerOnTouched(fn: OnTouchedType): void {\n    this.onTouched = fn;\n  }\n\n  setDisabledState(): void {\n    // Note: disabled state is handled through the disabled input\n    // This method is required by ControlValueAccessor interface\n  }\n}\n"
    },
    {
      "name": "toggle-group.variants.ts",
      "content": "import { cva, type VariantProps } from 'class-variance-authority';\n\nexport const toggleGroupVariants = cva('flex w-fit items-center rounded-md', {\n  variants: {\n    zType: {\n      default: '',\n      outline: 'shadow-sm',\n    },\n    zSize: {\n      sm: '',\n      md: '',\n      lg: '',\n    },\n  },\n  defaultVariants: {\n    zType: 'default',\n    zSize: 'md',\n  },\n});\n\nexport const toggleGroupItemVariants = cva(\n  'inline-flex items-center justify-center whitespace-nowrap rounded-none gap-2 text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground',\n  {\n    variants: {\n      zType: {\n        default: 'bg-transparent',\n        outline: 'border border-input bg-transparent hover:bg-accent hover:text-accent-foreground',\n      },\n      zSize: {\n        sm: 'h-8 px-2.5 text-xs',\n        md: 'h-9 px-3 text-sm',\n        lg: 'h-10 px-4 text-sm',\n      },\n    },\n    defaultVariants: {\n      zType: 'default',\n      zSize: 'md',\n    },\n  },\n);\n\nexport type ZardToggleGroupVariants = VariantProps<typeof toggleGroupVariants>;\nexport type ZardToggleGroupItemVariants = VariantProps<typeof toggleGroupItemVariants>;\n"
    }
  ],
  "registryDependencies": [
    "toggle",
    "icon"
  ]
}
