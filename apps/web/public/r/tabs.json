{
  "name": "tabs",
  "type": "registry:component",
  "files": [
    {
      "name": "tabs.component.ts",
      "content": "import { NgTemplateOutlet } from '@angular/common';\nimport {\n  afterNextRender,\n  type AfterViewInit,\n  ChangeDetectionStrategy,\n  Component,\n  computed,\n  contentChildren,\n  DestroyRef,\n  DOCUMENT,\n  type ElementRef,\n  inject,\n  Injector,\n  input,\n  output,\n  runInInjectionContext,\n  signal,\n  type TemplateRef,\n  viewChild,\n  ViewEncapsulation,\n} from '@angular/core';\nimport { takeUntilDestroyed, toObservable } from '@angular/core/rxjs-interop';\n\nimport clsx from 'clsx';\nimport { debounceTime, fromEvent, merge, map, distinctUntilChanged } from 'rxjs';\nimport { twMerge } from 'tailwind-merge';\n\nimport { ZardButtonComponent } from '@/shared/components/button';\nimport { ZardIconComponent } from '@/shared/components/icon';\nimport {\n  tabButtonVariants,\n  tabContainerVariants,\n  tabNavVariants,\n  type ZardTabVariants,\n} from '@/shared/components/tabs/tabs.variants';\n\nexport type zPosition = 'top' | 'bottom' | 'left' | 'right';\nexport type zAlign = 'center' | 'start' | 'end';\n\n@Component({\n  selector: 'z-tab',\n  imports: [],\n  template: `\n    <ng-template #content>\n      <ng-content />\n    </ng-template>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n})\nexport class ZardTabComponent {\n  readonly label = input.required<string>();\n  readonly contentTemplate = viewChild.required<TemplateRef<unknown>>('content');\n}\n\n@Component({\n  selector: 'z-tab-group',\n  imports: [NgTemplateOutlet, ZardButtonComponent, ZardIconComponent],\n  template: `\n    @if (navBeforeContent()) {\n      <ng-container [ngTemplateOutlet]=\"navigationBlock\" />\n    }\n\n    <div class=\"tab-content flex-1\">\n      @for (tab of tabs(); track $index; let index = $index) {\n        <div\n          role=\"tabpanel\"\n          [attr.id]=\"'tabpanel-' + index\"\n          [attr.aria-labelledby]=\"'tab-' + index\"\n          [attr.tabindex]=\"0\"\n          [hidden]=\"activeTabIndex() !== index\"\n          class=\"focus-visible:ring-primary/50 outline-none focus-visible:ring-2\"\n        >\n          <ng-container [ngTemplateOutlet]=\"tab.contentTemplate()\" />\n        </div>\n      }\n    </div>\n\n    @if (!navBeforeContent()) {\n      <ng-container [ngTemplateOutlet]=\"navigationBlock\" />\n    }\n\n    <ng-template #navigationBlock>\n      @let horizontal = isHorizontal();\n\n      <div [class]=\"navGridClasses()\">\n        @if (showArrow()) {\n          @if (horizontal) {\n            <button\n              type=\"button\"\n              [class]=\"'scroll-btn scroll-left cursor-pointer pr-4 ' + (zTabsPosition() === 'top' ? 'mb-4' : 'mt-4')\"\n              (click)=\"scrollNav('left')\"\n            >\n              <z-icon zType=\"chevron-left\" />\n            </button>\n          } @else {\n            <button\n              type=\"button\"\n              [class]=\"'scroll-btn scroll-up cursor-pointer pb-4 ' + (zTabsPosition() === 'left' ? 'mr-4' : 'ml-4')\"\n              (click)=\"scrollNav('up')\"\n            >\n              <z-icon zType=\"chevron-up\" />\n            </button>\n          }\n        }\n\n        <nav\n          [class]=\"navClasses()\"\n          #tabNav\n          role=\"tablist\"\n          [attr.aria-orientation]=\"horizontal ? 'horizontal' : 'vertical'\"\n        >\n          @for (tab of tabs(); track $index; let index = $index) {\n            <button\n              type=\"button\"\n              z-button\n              zType=\"ghost\"\n              role=\"tab\"\n              [attr.id]=\"'tab-' + index\"\n              [attr.aria-selected]=\"activeTabIndex() === index\"\n              [attr.tabindex]=\"activeTabIndex() === index ? 0 : -1\"\n              [attr.aria-controls]=\"'tabpanel-' + index\"\n              (click)=\"setActiveTab(index)\"\n              [class]=\"buttonClassesSignal()[index]\"\n            >\n              {{ tab.label() }}\n            </button>\n          }\n        </nav>\n\n        @if (showArrow()) {\n          @if (horizontal) {\n            <button\n              type=\"button\"\n              [class]=\"'scroll-btn scroll-right cursor-pointer pl-4 ' + (zTabsPosition() === 'top' ? 'mb-4' : 'mt-4')\"\n              (click)=\"scrollNav('right')\"\n            >\n              <z-icon zType=\"chevron-right\" />\n            </button>\n          } @else {\n            <button\n              type=\"button\"\n              [class]=\"'scroll-btn scroll-down cursor-pointer pt-4 ' + (zTabsPosition() === 'left' ? 'mr-4' : 'ml-4')\"\n              (click)=\"scrollNav('down')\"\n            >\n              <z-icon zType=\"chevron-down\" />\n            </button>\n          }\n        }\n      </div>\n    </ng-template>\n  `,\n  styles: `\n    .nav-tab-scroll {\n      -webkit-overflow-scrolling: touch;\n      scroll-behavior: smooth;\n      &::-webkit-scrollbar-thumb {\n        background-color: rgba(209, 209, 209, 0.2);\n        border-radius: 2px;\n      }\n      &::-webkit-scrollbar {\n        height: 4px;\n        width: 4px;\n      }\n      &::-webkit-scrollbar-button {\n        display: none;\n      }\n    }\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n  host: { '[class]': 'containerClasses()' },\n})\nexport class ZardTabGroupComponent implements AfterViewInit {\n  private readonly tabComponents = contentChildren(ZardTabComponent, { descendants: true });\n  private readonly tabsContainer = viewChild.required<ElementRef>('tabNav');\n  private readonly destroyRef = inject(DestroyRef);\n  private readonly injector = inject(Injector);\n  private readonly window = inject(DOCUMENT).defaultView;\n\n  protected readonly tabs = computed(() => this.tabComponents());\n  protected readonly activeTabIndex = signal<number>(0);\n  protected readonly scrollPresent = signal<boolean>(false);\n\n  protected readonly zTabChange = output<{\n    index: number;\n    label: string;\n    tab: ZardTabComponent;\n  }>();\n\n  protected readonly zDeselect = output<{\n    index: number;\n    label: string;\n    tab: ZardTabComponent;\n  }>();\n\n  readonly zTabsPosition = input<ZardTabVariants['zPosition']>('top');\n  readonly zActivePosition = input<ZardTabVariants['zActivePosition']>('bottom');\n  readonly zShowArrow = input(true);\n  readonly zScrollAmount = input(100);\n  readonly zAlignTabs = input<zAlign>('start');\n  // Preserve consumer classes on host\n  readonly class = input<string>('');\n\n  protected readonly showArrow = computed(() => this.zShowArrow() && this.scrollPresent());\n\n  ngAfterViewInit(): void {\n    // default tab selection\n    if (this.tabs().length) {\n      this.setActiveTab(0);\n    }\n\n    runInInjectionContext(this.injector, () => {\n      const observeInputs$ = merge(\n        toObservable(this.zShowArrow),\n        toObservable(this.tabs),\n        toObservable(this.zTabsPosition),\n      );\n\n      // Re-observe whenever #tabNav reference changes (e.g., when placement toggles)\n      let observedEl: HTMLElement | null = null;\n      const tabNavEl$ = toObservable(this.tabsContainer).pipe(\n        map(ref => ref.nativeElement as HTMLElement),\n        distinctUntilChanged(),\n      );\n\n      afterNextRender(() => {\n        // SSR/browser guard\n        if (!this.window || typeof ResizeObserver === 'undefined') {\n          return;\n        }\n\n        const resizeObserver = new ResizeObserver(() => this.setScrollState());\n\n        tabNavEl$.pipe(takeUntilDestroyed(this.destroyRef)).subscribe(el => {\n          if (observedEl) {\n            resizeObserver.unobserve(observedEl);\n          }\n          observedEl = el;\n          resizeObserver.observe(el);\n          this.setScrollState();\n        });\n\n        merge(observeInputs$, fromEvent(this.window, 'resize'))\n          .pipe(debounceTime(10), takeUntilDestroyed(this.destroyRef))\n          .subscribe(() => this.setScrollState());\n\n        this.destroyRef.onDestroy(() => resizeObserver.disconnect());\n      });\n    });\n  }\n\n  private setScrollState(): void {\n    if (this.hasScroll() !== this.scrollPresent()) {\n      this.scrollPresent.set(this.hasScroll());\n    }\n  }\n\n  private hasScroll(): boolean {\n    const navElement: HTMLElement = this.tabsContainer().nativeElement;\n    if (this.zShowArrow()) {\n      return navElement.scrollWidth > navElement.clientWidth || navElement.scrollHeight > navElement.clientHeight;\n    }\n    return false;\n  }\n\n  protected setActiveTab(index: number) {\n    const currentTab = this.tabs()[this.activeTabIndex()];\n    if (index !== this.activeTabIndex()) {\n      this.zDeselect.emit({\n        index: this.activeTabIndex(),\n        label: currentTab.label(),\n        tab: currentTab,\n      });\n    }\n\n    this.activeTabIndex.set(index);\n    const activeTabComponent = this.tabs()[index];\n    if (activeTabComponent) {\n      this.zTabChange.emit({\n        index,\n        label: activeTabComponent.label(),\n        tab: activeTabComponent,\n      });\n    }\n  }\n\n  protected readonly navBeforeContent = computed(() => {\n    const position = this.zTabsPosition();\n    return position === 'top' || position === 'left';\n  });\n\n  protected readonly isHorizontal = computed(() => {\n    const position = this.zTabsPosition();\n    return position === 'top' || position === 'bottom';\n  });\n\n  protected readonly navGridClasses = computed(() => {\n    const gridLayout = this.isHorizontal() ? 'grid-cols-[25px_1fr_25px]' : 'grid-rows-[25px_1fr_25px]';\n    if (this.showArrow()) {\n      return twMerge(clsx('grid', gridLayout));\n    }\n    return 'grid';\n  });\n\n  protected readonly containerClasses = computed(() =>\n    twMerge(tabContainerVariants({ zPosition: this.zTabsPosition() }), this.class()),\n  );\n\n  protected readonly navClasses = computed(() =>\n    tabNavVariants({ zPosition: this.zTabsPosition(), zAlignTabs: this.showArrow() ? 'start' : this.zAlignTabs() }),\n  );\n\n  protected readonly buttonClassesSignal = computed(() => {\n    const activeIndex = this.activeTabIndex();\n    const position = this.zActivePosition();\n    return this.tabs().map((_, index) => {\n      const isActive = activeIndex === index;\n      return tabButtonVariants({ zActivePosition: position, isActive });\n    });\n  });\n\n  protected scrollNav(direction: 'left' | 'right' | 'up' | 'down') {\n    const container = this.tabsContainer().nativeElement;\n    const scrollAmount = this.zScrollAmount();\n    if (direction === 'left') {\n      container.scrollLeft -= scrollAmount;\n    } else if (direction === 'right') {\n      container.scrollLeft += scrollAmount;\n    } else if (direction === 'up') {\n      container.scrollTop -= scrollAmount;\n    } else if (direction === 'down') {\n      container.scrollTop += scrollAmount;\n    }\n  }\n\n  selectTabByIndex(index: number): void {\n    if (index >= 0 && index < this.tabs().length) {\n      this.setActiveTab(index);\n    } else {\n      console.warn(`Index ${index} outside the range of available tabs.`);\n    }\n  }\n}\n"
    },
    {
      "name": "tabs.variants.ts",
      "content": "import { cva, type VariantProps } from 'class-variance-authority';\n\nimport type { zAlign } from './tabs.component';\n\nexport const tabContainerVariants = cva('flex', {\n  variants: {\n    zPosition: {\n      top: 'flex-col',\n      bottom: 'flex-col',\n      left: 'flex-row',\n      right: 'flex-row',\n    },\n  },\n  defaultVariants: {\n    zPosition: 'top',\n  },\n});\n\nexport const tabNavVariants = cva('flex gap-4 overflow-auto scroll nav-tab-scroll', {\n  variants: {\n    zPosition: {\n      top: 'flex-row border-b mb-4',\n      bottom: 'flex-row border-t mt-4',\n      left: 'flex-col border-r mr-4 min-h-0',\n      right: 'flex-col border-l ml-4 min-h-0',\n    },\n    zAlignTabs: {\n      start: 'justify-start',\n      center: 'justify-center',\n      end: 'justify-end',\n    },\n  },\n  defaultVariants: {\n    zPosition: 'top',\n    zAlignTabs: 'start',\n  },\n});\n\nexport const tabButtonVariants = cva('hover:bg-transparent rounded-none flex-shrink-0', {\n  variants: {\n    zActivePosition: {\n      top: '',\n      bottom: '',\n      left: '',\n      right: '',\n    },\n    isActive: {\n      true: '',\n      false: '',\n    },\n  },\n  compoundVariants: [\n    {\n      zActivePosition: 'top',\n      isActive: true,\n      class: 'border-t-2 border-t-primary',\n    },\n    {\n      zActivePosition: 'bottom',\n      isActive: true,\n      class: 'border-b-2 border-b-primary',\n    },\n    {\n      zActivePosition: 'left',\n      isActive: true,\n      class: 'border-l-2 border-l-primary',\n    },\n    {\n      zActivePosition: 'right',\n      isActive: true,\n      class: 'border-r-2 border-r-primary',\n    },\n  ],\n  defaultVariants: {\n    zActivePosition: 'bottom',\n    isActive: false,\n  },\n});\n\nexport type ZardTabVariants = VariantProps<typeof tabContainerVariants> &\n  VariantProps<typeof tabNavVariants> &\n  VariantProps<typeof tabButtonVariants> & { zAlignTabs: zAlign };\n"
    },
    {
      "name": "index.ts",
      "content": "export * from './tabs.component';\nexport * from './tabs.variants';\n"
    }
  ],
  "registryDependencies": [
    "button",
    "icon"
  ]
}
