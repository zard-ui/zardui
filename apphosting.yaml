# Firebase App Hosting configuration for ZardUI (Nx monorepo)
# See https://firebase.google.com/docs/app-hosting

# Cloud Run settings for the SSR backend
runConfig:
  # Minimum number of instances to keep warm (0 = scale to zero when idle)
  minInstances: 0

  # Maximum number of instances (auto-scaling limit)
  maxInstances: 10

  # Number of concurrent requests per instance
  concurrency: 80

  # CPU allocation (1 = 1 vCPU)
  cpu: 1

  # Memory allocation in MiB
  memoryMiB: 512

# Custom build configuration for Nx monorepo
buildConfig:
  # Build command - use Nx to build the web app
  buildCommand: 'npm run build'

  # Output directory containing the built SSR application
  outputDirectory: 'dist/apps/web'

  # Server entry point
  serverEntryPoint: 'server/server.mjs'

# Environment variables
env:
  - variable: NODE_ENV
    value: production
    availability:
      - RUNTIME
